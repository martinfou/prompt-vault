<!DOCTYPE html>
<html lang="en" x-data="app()" x-init="init()" :class="darkMode ? 'dark' : ''">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>Prompt Vault - LLM Prompt Storage</title>
    <script>
        // Configure Tailwind CDN to use class-based dark mode
        window.tailwindConfig = {
            darkMode: 'class'
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-light-theme">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-dark-theme" media="(prefers-color-scheme: dark)" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // Initialize highlight.js
        hljs.highlightAll();
        
        // Function to toggle highlight.js theme based on dark mode
        function toggleHighlightTheme(isDark) {
            const lightTheme = document.getElementById('hljs-light-theme');
            const darkTheme = document.getElementById('hljs-dark-theme');
            if (isDark) {
                lightTheme.disabled = true;
                darkTheme.disabled = false;
            } else {
                lightTheme.disabled = false;
                darkTheme.disabled = true;
            }
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
        /* Ensure class-based dark mode works */
        html:not(.dark) {
            color-scheme: light;
        }
        html.dark {
            color-scheme: dark;
        }
        
        /* Tailwind CDN uses media queries by default, so we need to override
           to make dark: classes work with .dark class instead */
        @media (prefers-color-scheme: dark) {
            html:not(.dark) .dark\:bg-gray-900 { background-color: inherit !important; }
            html:not(.dark) .dark\:bg-gray-800 { background-color: inherit !important; }
            html:not(.dark) .dark\:bg-gray-700 { background-color: inherit !important; }
            html:not(.dark) .dark\:text-white { color: inherit !important; }
            html:not(.dark) .dark\:text-gray-100 { color: inherit !important; }
            html:not(.dark) .dark\:text-gray-300 { color: inherit !important; }
            html:not(.dark) .dark\:text-gray-400 { color: inherit !important; }
            html:not(.dark) .dark\:border-gray-700 { border-color: inherit !important; }
            html:not(.dark) .dark\:border-gray-600 { border-color: inherit !important; }
            html:not(.dark) .dark\:hover\:bg-gray-700:hover { background-color: inherit !important; }
            html:not(.dark) .dark\:hover\:bg-gray-600:hover { background-color: inherit !important; }
        }
        
        /* When .dark class is present, force dark mode styles */
        html.dark .dark\:bg-gray-900 { background-color: rgb(17 24 39) !important; }
        html.dark .dark\:bg-gray-800 { background-color: rgb(31 41 55) !important; }
        html.dark .dark\:bg-gray-700 { background-color: rgb(55 65 81) !important; }
        html.dark .dark\:text-white { color: rgb(255 255 255) !important; }
        html.dark .dark\:text-gray-100 { color: rgb(243 244 246) !important; }
        html.dark .dark\:text-gray-300 { color: rgb(209 213 219) !important; }
        html.dark .dark\:text-gray-400 { color: rgb(156 163 175) !important; }
        html.dark .dark\:border-gray-700 { border-color: rgb(55 65 81) !important; }
        html.dark .dark\:border-gray-600 { border-color: rgb(75 85 99) !important; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Prompt Vault</h1>
                    <div class="flex items-center gap-4">
                        <button @click="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <svg x-show="!darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                            <svg x-show="darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </button>
                        <button @click="runButtonTests()" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm font-medium" title="Test all buttons">
                            ðŸ§ª Test Buttons
                        </button>
                        <button @click="showImportModal = true" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors text-sm font-medium">
                            Import
                        </button>
                        <button @click="exportData()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium">
                            Export
                        </button>
                        <button @click="showCreateModal = true; resetCurrentPrompt()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium">
                            + New Prompt
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex gap-6">
                <!-- Sidebar -->
                <aside class="w-64 flex-shrink-0">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 space-y-4">
                        <!-- Search -->
                        <div>
                            <input 
                                type="text" 
                                x-model="searchQuery"
                                @input="filterPrompts()"
                                placeholder="Search prompts..." 
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >
                        </div>

                        <!-- Categories -->
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <button @click="categoriesCollapsed = !categoriesCollapsed" class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors">
                                    <svg class="w-4 h-4 transition-transform" :class="{'rotate-90': !categoriesCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                    Prompt Types
                                </button>
                                <button @click.stop="showCategoryModal = true" class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-xs">
                                    + Add
                                </button>
                            </div>
                            <div x-show="!categoriesCollapsed" x-transition class="space-y-1">
                                <button 
                                    @click="selectedCategory = null; filterPrompts()"
                                    :class="selectedCategory === null ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                                    class="w-full text-left px-2 py-1 rounded text-sm transition-colors"
                                >
                                    All Prompts
                                </button>
                                <template x-for="category in categories" :key="category">
                                    <div class="flex items-center justify-between group hover:bg-gray-50 dark:hover:bg-gray-700 rounded">
                                        <button 
                                            @click="selectedCategory = category; filterPrompts()"
                                            :class="selectedCategory === category ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                                            class="flex-1 text-left px-2 py-1 rounded text-sm transition-colors"
                                        >
                                            <span x-text="category"></span>
                                        </button>
                                        <button 
                                            @click.stop="deleteCategory(category)"
                                            class="opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 p-1 rounded transition-opacity"
                                            title="Delete prompt type"
                                        >
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Tags Filter -->
                        <div>
                            <button @click="tagsCollapsed = !tagsCollapsed" class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-2">
                                <svg class="w-4 h-4 transition-transform" :class="{'rotate-90': !tagsCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                                Tags
                            </button>
                            <div x-show="!tagsCollapsed" x-transition class="flex flex-wrap gap-1">
                                <template x-for="tag in allTags" :key="tag">
                                    <button 
                                        @click="toggleTagFilter(tag)"
                                        :class="selectedTags.includes(tag) ? 'bg-blue-600 text-white' : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'"
                                        class="px-2 py-1 rounded text-xs transition-colors"
                                        x-text="tag"
                                    ></button>
                                </template>
                            </div>
                        </div>

                        <!-- Prompt Frameworks -->
                        <div>
                            <button @click="frameworksCollapsed = !frameworksCollapsed" class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors mb-2">
                                <svg class="w-4 h-4 transition-transform" :class="{'rotate-90': !frameworksCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                                Frameworks
                            </button>
                            <div x-show="!frameworksCollapsed" x-transition class="space-y-3 text-sm max-h-[80vh] overflow-y-auto">
                                <!-- General Purpose Frameworks -->
                                <div class="border-t border-gray-200 dark:border-gray-700 pt-2">
                                    <button @click="generalPurposeCollapsed = !generalPurposeCollapsed" class="w-full text-left flex items-center gap-2 mb-2">
                                        <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !generalPurposeCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase">General Purpose</p>
                                    </button>
                                </div>
                                <div x-show="!generalPurposeCollapsed" x-transition class="space-y-3">
                                <!-- CRISPE Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.crispe = !frameworkBodyCollapsed.crispe" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.crispe}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            CRISPE
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Multi-step technical tasks, code generation, architectural decisions.</p>
                                    <div x-show="!frameworkBodyCollapsed.crispe" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Capacity/Role, Insight, Statement, Personality, Experiment</p>
                                        <button @click="frameworkExamples.crispe = !frameworkExamples.crispe" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.crispe}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.crispe" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Capacity:</strong> Act as a senior software architect
<strong>Role:</strong> Technical documentation expert
<strong>Insight:</strong> Our team needs clear API documentation for a REST service
<strong>Statement:</strong> Create comprehensive API documentation
<strong>Personality:</strong> Professional, clear, and concise
<strong>Experiment:</strong> Provide 3 different documentation styles</div>
                                    </div>
                                </div>

                                <!-- ELAVIS Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.elavis = !frameworkBodyCollapsed.elavis" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.elavis}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            ELAVIS
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Blog posts, emails, social media, marketing copy.</p>
                                    <div x-show="!frameworkBodyCollapsed.elavis" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Instruction, Context, Input Data, Output Indicator</p>
                                        <button @click="frameworkExamples.elavis = !frameworkExamples.elavis" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.elavis}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.elavis" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Instruction:</strong> Generate a professional blog post
<strong>Context:</strong> Writing for a tech company blog
<strong>Input Data:</strong> Topic: "AI in Healthcare"
<strong>Output Indicator:</strong> 800-1000 words, engaging tone, SEO optimized</div>
                                    </div>
                                </div>

                                <!-- SPARC Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.sparc = !frameworkBodyCollapsed.sparc" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.sparc}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            SPARC
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Technical documentation, user guides, API docs, project proposals.</p>
                                    <div x-show="!frameworkBodyCollapsed.sparc" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Situation, Purpose, Audience, Result, Constraints</p>
                                        <button @click="frameworkExamples.sparc = !frameworkExamples.sparc" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.sparc}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.sparc" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Situation:</strong> Need technical documentation for API
<strong>Purpose:</strong> Help developers integrate the API
<strong>Audience:</strong> Software developers with mid-level experience
<strong>Result:</strong> Clear, well-structured documentation
<strong>Constraints:</strong> Must include code examples, max 2000 words</div>
                                    </div>
                                </div>

                                <!-- RISEN Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.risen = !frameworkBodyCollapsed.risen" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.risen}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            RISEN
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Data analysis, structured problem-solving, analytical tasks.</p>
                                    <div x-show="!frameworkBodyCollapsed.risen" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Role, Input, Steps, Expectation, Narrowing</p>
                                        <button @click="frameworkExamples.risen = !frameworkExamples.risen" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.risen}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.risen" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Role:</strong> Act as a data analyst
<strong>Input:</strong> Sales data for Q1 2024
<strong>Steps:</strong> Analyze trends, identify patterns, create summary
<strong>Expectation:</strong> Provide actionable insights
<strong>Narrowing:</strong> Focus on top 3 product categories</div>
                                    </div>
                                </div>

                                <!-- PGTC Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.pgtc = !frameworkBodyCollapsed.pgtc" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.pgtc}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            PGTC
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Quick content creation, copywriting, simple structured outputs.</p>
                                    <div x-show="!frameworkBodyCollapsed.pgtc" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Persona, Goal, Task, Context</p>
                                        <button @click="frameworkExamples.pgtc = !frameworkExamples.pgtc" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.pgtc}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.pgtc" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Persona:</strong> You are a professional copywriter
<strong>Goal:</strong> Create compelling marketing copy
<strong>Task:</strong> Write a product description
<strong>Context:</strong> Promoting a new SaaS tool for developers</div>
                                    </div>
                                </div>

                                <!-- RTF Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.rtf = !frameworkBodyCollapsed.rtf" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.rtf}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            RTF
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Data conversion, formatting tasks, quick transformations.</p>
                                    <div x-show="!frameworkBodyCollapsed.rtf" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Request, Task, Format</p>
                                        <button @click="frameworkExamples.rtf = !frameworkExamples.rtf" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.rtf}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.rtf" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Request:</strong> Convert this list to JSON
<strong>Task:</strong> Transform the following notes into structured data
<strong>Format:</strong> JSON with keys: title, date, priority</div>
                                    </div>
                                </div>

                                <!-- RACE Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.race = !frameworkBodyCollapsed.race" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.race}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            RACE
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Emails, summaries, reports, daily communication tasks.</p>
                                    <div x-show="!frameworkBodyCollapsed.race" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Role, Action, Context, Execute</p>
                                        <button @click="frameworkExamples.race = !frameworkExamples.race" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.race}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.race" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Role:</strong> You are a professional email writer
<strong>Action:</strong> Draft a meeting follow-up email
<strong>Context:</strong> Meeting with client about project timeline
<strong>Execute:</strong> Send professional, concise email</div>
                                    </div>
                                </div>

                                <!-- TAG Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.tag = !frameworkBodyCollapsed.tag" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.tag}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            TAG
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Process documentation, workflow definition, task breakdown.</p>
                                    <div x-show="!frameworkBodyCollapsed.tag" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Task, Action, Goal</p>
                                        <button @click="frameworkExamples.tag = !frameworkExamples.tag" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.tag}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.tag" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Task:</strong> Review code for security vulnerabilities
<strong>Action:</strong> Analyze codebase and identify issues
<strong>Goal:</strong> Produce a security audit report</div>
                                    </div>
                                </div>

                                <!-- STAR Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.star = !frameworkBodyCollapsed.star" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.star}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            STAR
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Interview responses, case studies, problem-solving narratives.</p>
                                    <div x-show="!frameworkBodyCollapsed.star" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Situation, Task, Action, Result</p>
                                        <button @click="frameworkExamples.star = !frameworkExamples.star" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.star}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.star" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Situation:</strong> Customer complaints about slow response times
<strong>Task:</strong> Improve system performance
<strong>Action:</strong> Implemented caching and optimized queries
<strong>Result:</strong> Reduced response time by 60%</div>
                                    </div>
                                </div>

                                <!-- CLEAR Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.clear = !frameworkBodyCollapsed.clear" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.clear}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            CLEAR
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Clear communication, adaptable prompts, iterative refinement.</p>
                                    <div x-show="!frameworkBodyCollapsed.clear" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Concise, Logical, Explicit, Adaptive, Reflective</p>
                                        <button @click="frameworkExamples.clear = !frameworkExamples.clear" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.clear}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.clear" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Concise:</strong> Brief and to the point
<strong>Logical:</strong> Follows clear reasoning
<strong>Explicit:</strong> Clear instructions
<strong>Adaptive:</strong> Adjusts to context
<strong>Reflective:</strong> Considers feedback</div>
                                    </div>
                                </div>

                                <!-- SMART Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.smart = !frameworkBodyCollapsed.smart" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.smart}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            SMART
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Goal setting, project planning, measurable objectives.</p>
                                    <div x-show="!frameworkBodyCollapsed.smart" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Specific, Measurable, Achievable, Relevant, Time-bound</p>
                                        <button @click="frameworkExamples.smart = !frameworkExamples.smart" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.smart}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.smart" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Specific:</strong> Increase user engagement by 25%
<strong>Measurable:</strong> Track via analytics dashboard
<strong>Achievable:</strong> With current resources
<strong>Relevant:</strong> Aligns with business goals
<strong>Time-bound:</strong> Within 3 months</div>
                                    </div>
                                </div>

                                <!-- RIDE Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.ride = !frameworkBodyCollapsed.ride" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.ride}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            RIDE
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Medical education, tutoring, educational scenarios with examples.</p>
                                    <div x-show="!frameworkBodyCollapsed.ride" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Role, Input, Directive, Examples</p>
                                        <button @click="frameworkExamples.ride = !frameworkExamples.ride" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.ride}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.ride" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Role:</strong> Act as a medical tutor
<strong>Input:</strong> Patient case with symptoms
<strong>Directive:</strong> Help identify differential diagnosis
<strong>Examples:</strong> Include 3 possible diagnoses with justification</div>
                                    </div>
                                </div>

                                <!-- PROMPT Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.prompt = !frameworkBodyCollapsed.prompt" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.prompt}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            PROMPT
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Complex projects, thorough planning, comprehensive prompts.</p>
                                    <div x-show="!frameworkBodyCollapsed.prompt" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Purpose, Role, Output, Mechanics, Parameters, Testing</p>
                                        <button @click="frameworkExamples.prompt = !frameworkExamples.prompt" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.prompt}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.prompt" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Purpose:</strong> Generate marketing copy
<strong>Role:</strong> Professional copywriter
<strong>Output:</strong> 500-word article
<strong>Mechanics:</strong> Use persuasive language
<strong>Parameters:</strong> Target audience: B2B SaaS
<strong>Testing:</strong> A/B test two versions</div>
                                    </div>
                                </div>

                                <!-- TAP Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.tap = !frameworkBodyCollapsed.tap" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.tap}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            TAP
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Tutorials, educational content, instructional materials.</p>
                                    <div x-show="!frameworkBodyCollapsed.tap" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Task, Audience, Purpose</p>
                                        <button @click="frameworkExamples.tap = !frameworkExamples.tap" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.tap}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.tap" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Task:</strong> Create a tutorial
<strong>Audience:</strong> Beginner developers
<strong>Purpose:</strong> Teach basic Python concepts</div>
                                    </div>
                                </div>

                                <!-- CARE Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.care = !frameworkBodyCollapsed.care" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.care}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            CARE
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Format-specific outputs, JSON/XML generation, structured data.</p>
                                    <div x-show="!frameworkBodyCollapsed.care" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Context, Action, Result, Example</p>
                                        <button @click="frameworkExamples.care = !frameworkExamples.care" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.care}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.care" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Context:</strong> Need formatted JSON response
<strong>Action:</strong> Convert user data to JSON
<strong>Result:</strong> Properly formatted JSON object
<strong>Example:</strong> {"name": "John", "age": 30}</div>
                                    </div>
                                </div>

                                <!-- COSTAR Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.costar = !frameworkBodyCollapsed.costar" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.costar}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            COSTAR
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Marketing copy, brand-aligned content, audience-specific writing.</p>
                                    <div x-show="!frameworkBodyCollapsed.costar" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Context, Objective, Style, Tone, Audience, Response</p>
                                        <button @click="frameworkExamples.costar = !frameworkExamples.costar" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.costar}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.costar" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Context:</strong> Marketing campaign for new product
<strong>Objective:</strong> Increase brand awareness
<strong>Style:</strong> Engaging and modern
<strong>Tone:</strong> Friendly and professional
<strong>Audience:</strong> Millennials and Gen Z
<strong>Response:</strong> Create social media posts</div>
                                    </div>
                                </div>
                                </div>

                                <!-- AI Reasoning & Chain-of-Thought -->
                                <div class="border-t border-gray-200 dark:border-gray-700 pt-2 mt-3">
                                    <button @click="aiReasoningCollapsed = !aiReasoningCollapsed" class="w-full text-left flex items-center gap-2 mb-2">
                                        <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !aiReasoningCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase">AI Reasoning & Chain-of-Thought</p>
                                    </button>
                                </div>
                                <div x-show="!aiReasoningCollapsed" x-transition class="space-y-3">
                                <!-- Chain-of-Thought Prompting -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.chainOfThought = !frameworkBodyCollapsed.chainOfThought" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.chainOfThought}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            Chain-of-Thought
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Complex problem-solving, step-by-step analysis, logical reasoning tasks</p>
                                    <div x-show="!frameworkBodyCollapsed.chainOfThought" x-transition class="mt-2 space-y-2">
                                        <button @click="frameworkExamples.chainOfThought = !frameworkExamples.chainOfThought" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.chainOfThought}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.chainOfThought" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
Let's think step by step:
1. First, identify all relevant symptoms
2. Then, narrow down possible diagnoses
3. Finally, justify the most likely diagnosis</div>
                                    </div>
                                </div>

                                <!-- 5C Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.fiveC = !frameworkBodyCollapsed.fiveC" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.fiveC}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            5C Framework
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Iterative prompt improvement, refining outputs, continuous optimization.</p>
                                    <div x-show="!frameworkBodyCollapsed.fiveC" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Clarity, Contextualization, Command, Chaining, Continuous Refinement</p>
                                        <button @click="frameworkExamples.fiveC = !frameworkExamples.fiveC" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.fiveC}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.fiveC" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Clarity:</strong> Clear instructions
<strong>Contextualization:</strong> Provide background info
<strong>Command:</strong> Use imperative language
<strong>Chaining:</strong> Break into steps
<strong>Continuous Refinement:</strong> Iterate based on feedback</div>
                                    </div>
                                </div>

                                <!-- Tree-of-Thought Prompting -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.treeOfThought = !frameworkBodyCollapsed.treeOfThought" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.treeOfThought}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            Tree-of-Thought
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Exploring multiple solutions, comparing options, diagnostic reasoning</p>
                                    <div x-show="!frameworkBodyCollapsed.treeOfThought" x-transition class="mt-2 space-y-2">
                                        <button @click="frameworkExamples.treeOfThought = !frameworkExamples.treeOfThought" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.treeOfThought}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.treeOfThought" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
List multiple approaches:
1. Approach A: [description]
2. Approach B: [description]
3. Approach C: [description]
Evaluate each one and choose the best</div>
                                    </div>
                                </div>

                                <!-- Zero-Shot/Few-Shot Prompting -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.zeroShot = !frameworkBodyCollapsed.zeroShot" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.zeroShot}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            Zero-Shot/Few-Shot
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Format learning, pattern recognition, example-based training</p>
                                    <div x-show="!frameworkBodyCollapsed.zeroShot" x-transition class="mt-2 space-y-2">
                                        <button @click="frameworkExamples.zeroShot = !frameworkExamples.zeroShot" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.zeroShot}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.zeroShot" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
Example 1: [Sample patient note]
Example 2: [Sample patient note]
Now write one for: [Current case]</div>
                                    </div>
                                </div>

                                <!-- AI-Aided Clinical Reasoning -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.clinicalReasoning = !frameworkBodyCollapsed.clinicalReasoning" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.clinicalReasoning}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            AI-Aided Clinical Reasoning
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Medical training, clinical scenarios, educational simulations</p>
                                    <div x-show="!frameworkBodyCollapsed.clinicalReasoning" x-transition class="mt-2 space-y-2">
                                        <button @click="frameworkExamples.clinicalReasoning = !frameworkExamples.clinicalReasoning" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.clinicalReasoning}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.clinicalReasoning" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
You are a virtual standardized patient presenting with chest pain. Answer questions based on typical symptoms of myocardial infarction, and ask the learner to explain their diagnosis at the end.</div>
                                    </div>
                                </div>

                                <!-- GOLD Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.gold = !frameworkBodyCollapsed.gold" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.gold}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            GOLD
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Problem analysis, strategic planning, obstacle identification.</p>
                                    <div x-show="!frameworkBodyCollapsed.gold" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Goal, Obstacles, Logic, Data</p>
                                        <button @click="frameworkExamples.gold = !frameworkExamples.gold" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.gold}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.gold" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Goal:</strong> Optimize database performance
<strong>Obstacles:</strong> Limited budget, existing infrastructure
<strong>Logic:</strong> Use indexing and query optimization
<strong>Data:</strong> Current performance metrics</div>
                                    </div>
                                </div>
                                </div>

                                <!-- Specialized Prompts -->
                                <div class="border-t border-gray-200 dark:border-gray-700 pt-2 mt-3">
                                    <button @click="specializedPromptsCollapsed = !specializedPromptsCollapsed" class="w-full text-left flex items-center gap-2 mb-2">
                                        <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !specializedPromptsCollapsed}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase">Specialized Prompts</p>
                                    </button>
                                </div>
                                <div x-show="!specializedPromptsCollapsed" x-transition class="space-y-3">
                                <!-- PEACE Framework -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.peace = !frameworkBodyCollapsed.peace" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.peace}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            PEACE
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Self-reflection, decision analysis, learning journals.</p>
                                    <div x-show="!frameworkBodyCollapsed.peace" x-transition class="mt-2 space-y-2">
                                        <p class="text-xs text-gray-600 dark:text-gray-400"><strong>Stands for:</strong> Present, Explore, Analyze, Choose, Evaluate</p>
                                        <button @click="frameworkExamples.peace = !frameworkExamples.peace" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.peace}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.peace" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
<strong>Present:</strong> Describe the current situation
<strong>Explore:</strong> Identify thoughts and feelings
<strong>Analyze:</strong> Consider alternatives
<strong>Choose:</strong> Select a path forward
<strong>Evaluate:</strong> Assess the outcome</div>
                                    </div>
                                </div>

                                <!-- Reflective Prompting -->
                                <div class="border border-gray-200 dark:border-gray-700 rounded p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                    <button @click="frameworkBodyCollapsed.reflective = !frameworkBodyCollapsed.reflective" class="w-full text-left">
                                        <h4 class="font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-90': !frameworkBodyCollapsed.reflective}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                            Reflective Prompting
                                        </h4>
                                    </button>
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1 mb-2 ml-5"><strong>Good for:</strong> Learning reflection, educational journals, experience analysis</p>
                                    <div x-show="!frameworkBodyCollapsed.reflective" x-transition class="mt-2 space-y-2">
                                        <button @click="frameworkExamples.reflective = !frameworkExamples.reflective" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 mb-1 flex items-center gap-1">
                                            <svg class="w-3 h-3 transition-transform" :class="{'rotate-180': !frameworkExamples.reflective}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                            Example
                                        </button>
                                        <div x-show="!frameworkExamples.reflective" x-transition class="mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap">
DIEP Framework:
<strong>Describe:</strong> What happened?
<strong>Interpret:</strong> What did you learn?
<strong>Evaluate:</strong> What was significant?
<strong>Plan:</strong> What will you do differently?</div>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="flex-1">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
                        <!-- Prompts List -->
                        <div class="divide-y divide-gray-200 dark:divide-gray-700">
                            <template x-for="prompt in filteredPrompts" :key="prompt.id">
                                <div class="p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer" @click="openPrompt(prompt)">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <h3 class="font-semibold text-gray-900 dark:text-white mb-1" x-text="prompt.title"></h3>
                                            <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-2" x-text="prompt.content.substring(0, 150) + (prompt.content.length > 150 ? '...' : '')"></p>
                                            <div class="flex items-center gap-3 flex-wrap">
                                                <span class="text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded" x-text="prompt.category || 'No Type'"></span>
                                                <template x-for="tag in prompt.tags" :key="tag">
                                                    <span class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded" x-text="tag"></span>
                                                </template>
                                                <!-- Rating Display -->
                                                <template x-if="prompt.rating">
                                                    <div class="flex items-center gap-1" :title="'Rating: ' + prompt.rating + '/5'">
                                                        <span class="text-yellow-400 text-sm" x-text="'â˜…'.repeat(prompt.rating)"></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400" x-text="prompt.rating"></span>
                                                    </div>
                                                </template>
                                                <!-- Model Display -->
                                                <template x-if="prompt.model">
                                                    <span class="text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded" x-text="prompt.model"></span>
                                                </template>
                                                <span class="text-xs text-gray-500 dark:text-gray-400" x-text="'Words: ' + getWordCount(prompt.content)"></span>
                                                <span class="text-xs text-gray-500 dark:text-gray-400" x-text="'Modified: ' + formatDate(prompt.modifiedAt)"></span>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-2 ml-4">
                                            <button @click.stop="duplicatePrompt(prompt)" class="p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors" title="Duplicate">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                                </svg>
                                            </button>
                                            <button @click.stop="deletePrompt(prompt.id)" class="p-2 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors text-red-600 dark:text-red-400" title="Delete">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <div x-show="filteredPrompts.length === 0" class="p-8 text-center text-gray-500 dark:text-gray-400">
                                <p>No prompts found. Create your first prompt!</p>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Create/Edit Prompt Modal -->
        <div x-show="showCreateModal || showEditModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" @click.self="closeModal()">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white" x-text="showEditModal ? 'Edit Prompt' : 'New Prompt'"></h2>
                        <button @click="closeModal()" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <form @submit.prevent="savePrompt()" class="space-y-4">
                        <div x-show="!showEditModal">
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Use Template</label>
                            <select 
                                id="template-select"
                                @change="loadPromptTemplate($event.target.value)"
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >
                                <option value="">Select a template...</option>
                                <optgroup label="CRISPE Framework">
                                    <option value="professional-git-commit">Professional Git Commit Message (CRISPE)</option>
                                    <option value="senior-programmer">Senior Programmer (CRISPE)</option>
                                    <option value="scrummaster">Scrum Master (CRISPE)</option>
                                    <option value="software-architect">Software Architect (CRISPE)</option>
                                    <option value="code-review">Code Review (CRISPE)</option>
                                    <option value="technical-documentation">Technical Documentation Architect (CRISPE)</option>
                                    <option value="ux-designer">UX Designer (CRISPE)</option>
                                    <option value="individual-contributor">Individual Contributor Assistant (CRISPE)</option>
                                    <option value="engineering-manager">Engineering Manager Assistant (CRISPE)</option>
                                    <option value="springboot-mapstruct">Spring Boot MapStruct Mapper Example (CRISPE)</option>
                                    <option value="springboot-webclient">Spring Boot WebClient Example (CRISPE)</option>
                                    <option value="springboot-unit-test">Professional Unit Test with Mockito & JUnit 5 (CRISPE)</option>
                                </optgroup>
                                <optgroup label="Elavis Framework">
                                    <option value="content-generator">Content Generator (Elavis)</option>
                                    <option value="email-writer">Professional Email Writer (Elavis)</option>
                                    <option value="blog-post-generator">Blog Post Generator (Elavis)</option>
                                    <option value="technical-writer">Technical Writer (Elavis)</option>
                                    <option value="social-media-writer">Social Media Content Writer (Elavis)</option>
                                    <option value="ic-communication">Individual Contributor Communication (Elavis)</option>
                                    <option value="manager-communication">Manager Communication (Elavis)</option>
                                </optgroup>
                                <optgroup label="SPARC Framework">
                                    <option value="sparc-technical-documentation">Technical Documentation (SPARC)</option>
                                    <option value="sparc-code-explanation">Code Explanation & Documentation (SPARC)</option>
                                    <option value="sparc-project-proposal">Project Proposal Writer (SPARC)</option>
                                    <option value="sparc-user-guide">User Guide Writer (SPARC)</option>
                                    <option value="sparc-meeting-summary">Meeting Summary Writer (SPARC)</option>
                                    <option value="sparc-ic-documentation">Individual Contributor Documentation (SPARC)</option>
                                    <option value="sparc-manager-documentation">Manager Documentation (SPARC)</option>
                                </optgroup>
                            </select>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Select a template to pre-fill the form with an example prompt</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                            <input 
                                type="text" 
                                x-model="currentPrompt.title"
                                required
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Enter prompt title..."
                            >
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Prompt Type</label>
                            <div class="relative" x-data="{ showDropdown: false }" @click.outside="showDropdown = false">
                                <input 
                                    type="text" 
                                    x-model="currentPrompt.category"
                                    @input="showDropdown = true"
                                    @focus="showDropdown = true"
                                    @keydown.enter.prevent="handleCategoryInput($event)"
                                    @keydown.escape="showDropdown = false"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Type prompt type (e.g., Persona Prompt, Code Snippet Prompt)..."
                                    list="category-list"
                                >
                                <datalist id="category-list">
                                    <option value="">No Type</option>
                                    <template x-for="category in categories" :key="category">
                                        <option :value="category" x-text="category"></option>
                                    </template>
                                </datalist>
                                <div x-show="showDropdown && categories.length > 0" x-cloak class="absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto">
                                    <template x-for="category in categories.filter(c => !currentPrompt.category || c.toLowerCase().includes(currentPrompt.category.toLowerCase()))" :key="category">
                                        <button 
                                            type="button"
                                            @click="currentPrompt.category = category; showDropdown = false"
                                            class="w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 text-sm"
                                            x-text="category"
                                        ></button>
                                    </template>
                                    <div x-show="categories.filter(c => !currentPrompt.category || c.toLowerCase().includes(currentPrompt.category.toLowerCase())).length === 0 && categories.length > 0" class="px-3 py-2 text-sm text-gray-500 dark:text-gray-400">
                                        No matching prompt types
                                    </div>
                                </div>
                                <div x-show="showDropdown && categories.length === 0" x-cloak class="absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg px-3 py-2 text-sm text-gray-500 dark:text-gray-400">
                                    No prompt types yet. Type a name and press Enter to create one.
                                </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Type a new prompt type (e.g., "Persona Prompt", "Code Snippet Prompt") and press Enter to create it, or select from existing types</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tags (comma-separated)</label>
                            <div class="relative" x-data="{ showTagDropdown: false, selectedTagIndex: -1 }" @click.outside="showTagDropdown = false">
                                <input 
                                    type="text" 
                                    x-model="currentPrompt.tagsInput"
                                    @input="showTagDropdown = true; selectedTagIndex = -1"
                                    @focus="showTagDropdown = true; selectedTagIndex = -1"
                                    @keydown.arrow-down.prevent="selectedTagIndex = Math.min(selectedTagIndex + 1, getFilteredTags().length - 1)"
                                    @keydown.arrow-up.prevent="selectedTagIndex = Math.max(selectedTagIndex - 1, -1)"
                                    @keydown.enter.prevent="handleTagEnter($event)"
                                    @keydown.escape="showTagDropdown = false"
                                    @keydown.comma.prevent="handleTagComma($event)"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="e.g., code-generation, analysis, creative"
                                    x-ref="tagsInput"
                                >
                                <div 
                                    x-show="showTagDropdown && getFilteredTags().length > 0" 
                                    x-cloak 
                                    class="absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto"
                                >
                                    <template x-for="(tag, index) in getFilteredTags()" :key="tag">
                                        <button 
                                            type="button"
                                            @click="handleTagSelect(tag); showTagDropdown = false; selectedTagIndex = -1"
                                            :class="selectedTagIndex === index ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100'"
                                            class="w-full text-left px-3 py-2 text-sm transition-colors"
                                            x-text="tag"
                                        ></button>
                                    </template>
                                </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Type to see suggestions, press Enter or comma to add tag</p>
                        </div>

                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Content</label>
                                <div class="flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400">
                                    <span x-text="'Words: ' + getWordCount(currentPrompt.content)"></span>
                                    <span x-text="'Chars: ' + currentPrompt.content.length"></span>
                                </div>
                            </div>
                            <div class="relative">
                                <textarea 
                                    x-model="currentPrompt.content"
                                    required
                                    rows="12"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"
                                    placeholder="Enter your prompt content..."
                                ></textarea>
                                <div x-show="currentPrompt.content" class="absolute top-2 right-2">
                                    <button 
                                        type="button"
                                        @click="toggleSyntaxHighlighting()"
                                        class="px-2 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded text-xs transition-colors"
                                        x-text="syntaxHighlighting ? 'Disable Highlighting' : 'Enable Highlighting'"
                                    ></button>
                                </div>
                            </div>
                            <div x-show="syntaxHighlighting && currentPrompt.content" class="mt-2 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700">
                                <pre class="text-sm whitespace-pre-wrap"><code :class="darkMode ? 'hljs-dark' : 'hljs'" x-html="highlightCode(currentPrompt.content)"></code></pre>
                            </div>
                        </div>

                        <!-- Rating Section -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Rating (1-5)</label>
                            <div class="flex items-center gap-2">
                                <template x-for="i in 5" :key="i">
                                    <button
                                        type="button"
                                        @click="setRating(i)"
                                        class="text-2xl focus:outline-none transition-transform hover:scale-110"
                                        :class="currentPrompt.rating >= i ? 'text-yellow-400' : 'text-gray-300 dark:text-gray-600'"
                                    >
                                        â˜…
                                    </button>
                                </template>
                                <span class="ml-2 text-sm text-gray-500 dark:text-gray-400" x-text="currentPrompt.rating ? currentPrompt.rating + '/5' : 'Not rated'"></span>
                                <button
                                    type="button"
                                    @click="setRating(null)"
                                    x-show="currentPrompt.rating"
                                    class="ml-2 text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 underline"
                                >
                                    Clear
                                </button>
                            </div>
                        </div>

                        <!-- Model Selection -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Model Used</label>
                            <div class="relative" x-data="{ showModelDropdown: false }" @click.outside="showModelDropdown = false">
                                <input 
                                    type="text" 
                                    x-model="currentPrompt.model"
                                    @focus="showModelDropdown = true"
                                    @input="showModelDropdown = true"
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="Select or enter model name..."
                                    list="model-list"
                                >
                                <datalist id="model-list">
                                    <template x-for="model in getCommonModels()" :key="model">
                                        <option :value="model" x-text="model"></option>
                                    </template>
                                </datalist>
                                <div x-show="showModelDropdown && getCommonModels().length > 0" x-cloak class="absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto">
                                    <template x-for="model in getCommonModels().filter(m => !currentPrompt.model || m.toLowerCase().includes(currentPrompt.model.toLowerCase()))" :key="model">
                                        <button 
                                            type="button"
                                            @click="currentPrompt.model = model; showModelDropdown = false"
                                            class="w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 text-sm"
                                            x-text="model"
                                        ></button>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- Model Response -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Model Response</label>
                            <textarea 
                                x-model="currentPrompt.response"
                                rows="8"
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"
                                placeholder="Paste the model's response here..."
                            ></textarea>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Store the response from the model for reference</p>
                        </div>

                        <!-- Comments -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Comments & Notes</label>
                            <textarea 
                                x-model="currentPrompt.comments"
                                rows="4"
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
                                placeholder="Add your observations, improvements, or notes about this prompt..."
                            ></textarea>
                        </div>

                        <!-- Metadata Section (Collapsible) -->
                        <div x-data="{ metadataExpanded: false }" class="border border-gray-200 dark:border-gray-700 rounded-lg">
                            <button 
                                type="button"
                                @click="metadataExpanded = !metadataExpanded"
                                class="w-full px-4 py-2 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors rounded-t-lg"
                            >
                                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Metadata (Optional)</span>
                                <svg class="w-5 h-5 transition-transform" :class="{'rotate-180': metadataExpanded}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div x-show="metadataExpanded" x-transition class="p-4 space-y-3 grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Input Tokens</label>
                                    <input 
                                        type="number" 
                                        x-model="currentPrompt.metadata.inputTokens"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                        placeholder="â€”"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Output Tokens</label>
                                    <input 
                                        type="number" 
                                        x-model="currentPrompt.metadata.outputTokens"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                        placeholder="â€”"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Total Tokens</label>
                                    <input 
                                        type="number" 
                                        x-model="currentPrompt.metadata.totalTokens"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                        placeholder="â€”"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Cost ($)</label>
                                    <input 
                                        type="number" 
                                        step="0.00001"
                                        x-model="currentPrompt.metadata.cost"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                        placeholder="â€”"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Response Time (ms)</label>
                                    <input 
                                        type="number" 
                                        x-model="currentPrompt.metadata.responseTime"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                        placeholder="â€”"
                                    >
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Tested At</label>
                                    <input 
                                        type="datetime-local" 
                                        x-model="currentPrompt.metadata.testedAt"
                                        class="w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                                    >
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500 dark:text-gray-400">
                                <template x-if="showEditModal && currentPrompt.createdAt">
                                    <div>Created: <span x-text="formatDate(currentPrompt.createdAt)"></span></div>
                                </template>
                                <template x-if="showEditModal && currentPrompt.modifiedAt">
                                    <div>Modified: <span x-text="formatDate(currentPrompt.modifiedAt)"></span></div>
                                </template>
                                <template x-if="showEditModal && currentPrompt.lastUsedAt">
                                    <div>Last Used: <span x-text="formatDate(currentPrompt.lastUsedAt)"></span></div>
                                </template>
                            </div>
                            <div class="flex gap-3">
                                <button type="button" @click="closeModal()" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors">
                                    Cancel
                                </button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                                    Save
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Prompt View Modal -->
        <div x-show="showViewModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" @click.self="closeViewModal()">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white" x-text="viewingPrompt?.title"></h2>
                        <div class="flex items-center gap-2">
                            <button @click="markAsUsed(viewingPrompt)" class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors">
                                Mark as Used
                            </button>
                            <button @click="editPrompt(viewingPrompt)" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
                                Edit
                            </button>
                            <button @click="copyToClipboard(viewingPrompt.content, $event)" class="px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm transition-colors">
                                Copy
                            </button>
                            <button @click="closeViewModal()" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-center gap-3 flex-wrap">
                            <span class="text-sm px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded" x-text="viewingPrompt?.category || 'No Type'"></span>
                            <template x-for="tag in viewingPrompt?.tags || []" :key="tag">
                                <span class="text-sm px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded" x-text="tag"></span>
                            </template>
                            <!-- Rating Display -->
                            <template x-if="viewingPrompt?.rating">
                                <div class="flex items-center gap-1">
                                    <span class="text-yellow-400 text-lg" x-text="'â˜…'.repeat(viewingPrompt.rating)"></span>
                                    <span class="text-sm text-gray-500 dark:text-gray-400" x-text="viewingPrompt.rating + '/5'"></span>
                                </div>
                            </template>
                            <!-- Model Display -->
                            <template x-if="viewingPrompt?.model">
                                <span class="text-sm px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded" x-text="viewingPrompt.model"></span>
                            </template>
                        </div>

                        <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                            <pre class="whitespace-pre-wrap text-sm font-mono" x-text="viewingPrompt?.content"></pre>
                        </div>

                        <!-- Model Response Section -->
                        <template x-if="viewingPrompt?.response">
                            <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800">
                                <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Model Response</h3>
                                <div class="whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100" x-text="viewingPrompt.response"></div>
                            </div>
                        </template>

                        <!-- Comments Section -->
                        <template x-if="viewingPrompt?.comments">
                            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                                <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Comments & Notes</h3>
                                <div class="whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100" x-text="viewingPrompt.comments"></div>
                            </div>
                        </template>

                        <!-- Metadata Section (Collapsible) -->
                        <template x-if="viewingPrompt?.metadata && (viewingPrompt.metadata.inputTokens || viewingPrompt.metadata.outputTokens || viewingPrompt.metadata.totalTokens || viewingPrompt.metadata.cost || viewingPrompt.metadata.responseTime || viewingPrompt.metadata.testedAt)">
                            <div x-data="{ metadataExpanded: false }" class="border border-gray-200 dark:border-gray-700 rounded-lg">
                                <button 
                                    type="button"
                                    @click="metadataExpanded = !metadataExpanded"
                                    class="w-full px-4 py-2 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors rounded-t-lg"
                                >
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Metadata</span>
                                    <svg class="w-5 h-5 transition-transform" :class="{'rotate-180': metadataExpanded}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                                <div x-show="metadataExpanded" x-transition class="p-4 grid grid-cols-2 gap-4 text-sm">
                                    <template x-if="viewingPrompt?.metadata?.inputTokens">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Input Tokens:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="viewingPrompt.metadata.inputTokens.toLocaleString()"></span>
                                        </div>
                                    </template>
                                    <template x-if="viewingPrompt?.metadata?.outputTokens">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Output Tokens:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="viewingPrompt.metadata.outputTokens.toLocaleString()"></span>
                                        </div>
                                    </template>
                                    <template x-if="viewingPrompt?.metadata?.totalTokens">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Total Tokens:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="viewingPrompt.metadata.totalTokens.toLocaleString()"></span>
                                        </div>
                                    </template>
                                    <template x-if="viewingPrompt?.metadata?.cost">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Cost:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="'$' + parseFloat(viewingPrompt.metadata.cost).toFixed(5)"></span>
                                        </div>
                                    </template>
                                    <template x-if="viewingPrompt?.metadata?.responseTime">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Response Time:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="viewingPrompt.metadata.responseTime + ' ms'"></span>
                                        </div>
                                    </template>
                                    <template x-if="viewingPrompt?.metadata?.testedAt">
                                        <div>
                                            <span class="text-gray-600 dark:text-gray-400">Tested At:</span>
                                            <span class="ml-2 text-gray-900 dark:text-gray-100" x-text="formatDate(viewingPrompt.metadata.testedAt)"></span>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </template>

                        <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="space-y-1">
                                <div>Words: <span x-text="getWordCount(viewingPrompt?.content || '')"></span></div>
                                <div>Characters: <span x-text="(viewingPrompt?.content || '').length"></span></div>
                            </div>
                            <div class="space-y-1 text-right">
                                <template x-if="viewingPrompt?.createdAt">
                                    <div>Created: <span x-text="formatDate(viewingPrompt.createdAt)"></span></div>
                                </template>
                                <template x-if="viewingPrompt?.modifiedAt">
                                    <div>Modified: <span x-text="formatDate(viewingPrompt.modifiedAt)"></span></div>
                                </template>
                                <template x-if="viewingPrompt?.lastUsedAt">
                                    <div>Last Used: <span x-text="formatDate(viewingPrompt.lastUsedAt)"></span></div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Modal -->
        <div x-show="showCategoryModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showCategoryModal = false">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Add Prompt Type</h3>
                <div class="space-y-4">
                    <input 
                        type="text" 
                        x-model="newCategory"
                        @keyup.enter="addCategory()"
                        @keyup.escape="showCategoryModal = false; newCategory = ''"
                        placeholder="Prompt type (e.g., Persona Prompt, Code Snippet Prompt)..."
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                    <div class="flex gap-3">
                        <button @click="showCategoryModal = false; newCategory = ''" class="flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors">
                            Cancel
                        </button>
                        <button @click="addCategory()" class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                            Add
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Import Modal -->
        <div x-show="showImportModal" x-cloak class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" @click.self="showImportModal = false">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Import Prompts</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Upload JSON file</label>
                        <input 
                            type="file" 
                            @change="handleFileImport($event)"
                            accept=".json"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                        >
                    </div>
                    <div class="flex gap-3">
                        <button @click="showImportModal = false" class="flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function app() {
            return {
                darkMode: false,
                prompts: [],
                filteredPrompts: [],
                categories: [],
                allTags: [],
                selectedCategory: null,
                selectedTags: [],
                searchQuery: '',
                showCreateModal: false,
                showEditModal: false,
                showViewModal: false,
                showCategoryModal: false,
                showImportModal: false,
                categoriesCollapsed: true,
                tagsCollapsed: true,
                frameworksCollapsed: true,
                generalPurposeCollapsed: true,
                aiReasoningCollapsed: true,
                specializedPromptsCollapsed: true,
                frameworkExamples: {
                    crispe: true,
                    elavis: true,
                    sparc: true,
                    risen: true,
                    pgtc: true,
                    rtf: true,
                    race: true,
                    tag: true,
                    star: true,
                    clear: true,
                    smart: true,
                    ride: true,
                    prompt: true,
                    tap: true,
                    care: true,
                    costar: true,
                    chainOfThought: true,
                    fiveC: true,
                    treeOfThought: true,
                    zeroShot: true,
                    clinicalReasoning: true,
                    gold: true,
                    peace: true,
                    reflective: true
                },
                frameworkBodyCollapsed: {
                    crispe: true,
                    elavis: true,
                    sparc: true,
                    risen: true,
                    pgtc: true,
                    rtf: true,
                    race: true,
                    tag: true,
                    star: true,
                    clear: true,
                    smart: true,
                    ride: true,
                    prompt: true,
                    tap: true,
                    care: true,
                    costar: true,
                    chainOfThought: true,
                    fiveC: true,
                    treeOfThought: true,
                    zeroShot: true,
                    clinicalReasoning: true,
                    gold: true,
                    peace: true,
                    reflective: true
                },
                viewingPrompt: null,
                currentPrompt: {
                    id: null,
                    title: '',
                    content: '',
                    category: '',
                    tags: [],
                    tagsInput: '',
                    createdAt: null,
                    modifiedAt: null,
                    lastUsedAt: null,
                    rating: null,
                    model: '',
                    response: '',
                    comments: '',
                    metadata: {
                        inputTokens: null,
                        outputTokens: null,
                        totalTokens: null,
                        cost: null,
                        responseTime: null,
                        testedAt: null
                    }
                },
                newCategory: '',
                syntaxHighlighting: false,

                init() {
                    this.loadData();
                    this.filterPrompts();
                    this.loadDarkMode();
                },

                updateDarkClass() {
                    // Force update the dark class on html element
                    const htmlElement = document.documentElement;
                    if (this.darkMode) {
                        htmlElement.classList.add('dark');
                    } else {
                        htmlElement.classList.remove('dark');
                    }
                },

                loadDarkMode() {
                    const saved = localStorage.getItem('darkMode');
                    // Default to light mode (false) if not set
                    this.darkMode = saved === 'true';
                    this.updateDarkClass();
                    // Update highlight.js theme on load
                    if (typeof toggleHighlightTheme === 'function') {
                        toggleHighlightTheme(this.darkMode);
                    }
                },

                toggleDarkMode() {
                    this.darkMode = !this.darkMode;
                    localStorage.setItem('darkMode', this.darkMode);
                    // Force update the class immediately
                    this.updateDarkClass();
                    // Update highlight.js theme
                    if (typeof toggleHighlightTheme === 'function') {
                        toggleHighlightTheme(this.darkMode);
                    }
                    // Double-check after a brief delay to ensure it sticks
                    setTimeout(() => {
                        this.updateDarkClass();
                    }, 100);
                },

                loadData() {
                    const saved = localStorage.getItem('prompts');
                    const savedCategories = localStorage.getItem('categories');
                    
                    if (saved) {
                        this.prompts = JSON.parse(saved);
                    }
                    
                    if (savedCategories) {
                        this.categories = JSON.parse(savedCategories);
                    } else {
                        // Initialize with default prompt types
                        this.categories = [
                            'Persona Prompt',
                            'Code Snippet Prompt',
                            'Code Review Prompt',
                            'Documentation Prompt',
                            'Explanation Prompt',
                            'Tutorial Prompt',
                            'Analysis Prompt',
                            'Refactoring Prompt',
                            'Template Prompt',
                            'Troubleshooting Prompt',
                            'Design Prompt',
                            'Writing Prompt',
                            'Planning Prompt',
                            'Testing Prompt',
                            'Review Prompt',
                            'Translation Prompt',
                            'Summarization Prompt',
                            'Question Prompt',
                            'Instruction Prompt',
                            'Conversation Prompt'
                        ];
                        this.saveData();
                    }

                    this.updateAllTags();
                },

                saveData() {
                    localStorage.setItem('prompts', JSON.stringify(this.prompts));
                    localStorage.setItem('categories', JSON.stringify(this.categories));
                },

                getDefaultTags() {
                    return [
                        'code-generation',
                        'code-review',
                        'refactoring',
                        'debugging',
                        'testing',
                        'documentation',
                        'architecture',
                        'design-patterns',
                        'best-practices',
                        'optimization',
                        'security',
                        'performance',
                        'api-design',
                        'database',
                        'frontend',
                        'backend',
                        'full-stack',
                        'devops',
                        'ci-cd',
                        'deployment',
                        'monitoring',
                        'scalability',
                        'user-experience',
                        'accessibility',
                        'responsive-design',
                        'agile',
                        'scrum',
                        'project-management',
                        'requirements',
                        'analysis',
                        'problem-solving',
                        'troubleshooting',
                        'learning',
                        'onboarding',
                        'technical-writing',
                        'communication',
                        'collaboration',
                        'code-quality',
                        'clean-code',
                        'maintainability',
                        'readability',
                        'automation',
                        'scripting',
                        'data-analysis',
                        'machine-learning',
                        'ai',
                        'prompt-engineering',
                        'creative',
                        'marketing',
                        'business',
                        'productivity',
                        'workflow',
                        'tooling',
                        'git',
                        'version-control'
                    ];
                },

                updateAllTags() {
                    const tagsSet = new Set();
                    this.prompts.forEach(prompt => {
                        if (prompt.tags && Array.isArray(prompt.tags)) {
                            prompt.tags.forEach(tag => tagsSet.add(tag));
                        }
                    });
                    
                    // Merge with useful default tags
                    this.getDefaultTags().forEach(tag => tagsSet.add(tag));
                    this.allTags = Array.from(tagsSet).sort();
                },

                filterPrompts() {
                    let filtered = [...this.prompts];

                    // Filter by category
                    if (this.selectedCategory) {
                        filtered = filtered.filter(p => p.category === this.selectedCategory);
                    }

                    // Filter by tags
                    if (this.selectedTags.length > 0) {
                        filtered = filtered.filter(p => {
                            if (!p.tags || !Array.isArray(p.tags)) return false;
                            return this.selectedTags.some(tag => p.tags.includes(tag));
                        });
                    }

                    // Filter by search query
                    if (this.searchQuery.trim()) {
                        const query = this.searchQuery.toLowerCase();
                        filtered = filtered.filter(p => 
                            p.title.toLowerCase().includes(query) ||
                            p.content.toLowerCase().includes(query) ||
                            (p.tags && p.tags.some(tag => tag.toLowerCase().includes(query))) ||
                            (p.category && p.category.toLowerCase().includes(query))
                        );
                    }

                    // Sort by modified date (newest first)
                    filtered.sort((a, b) => {
                        const dateA = new Date(a.modifiedAt || a.createdAt || 0);
                        const dateB = new Date(b.modifiedAt || b.createdAt || 0);
                        return dateB - dateA;
                    });

                    this.filteredPrompts = filtered;
                },

                toggleTagFilter(tag) {
                    const index = this.selectedTags.indexOf(tag);
                    if (index > -1) {
                        this.selectedTags.splice(index, 1);
                    } else {
                        this.selectedTags.push(tag);
                    }
                    this.filterPrompts();
                },

                resetCurrentPrompt() {
                    const samplePrompt = `You are an expert software developer and code reviewer. Your task is to analyze the provided code and provide constructive feedback.

Please review the code for:
1. **Code Quality**: Check for best practices, readability, and maintainability
2. **Performance**: Identify potential bottlenecks or optimization opportunities
3. **Security**: Look for security vulnerabilities or potential issues
4. **Design Patterns**: Evaluate the use of appropriate design patterns
5. **Documentation**: Assess code comments and documentation

Format your response as:
- **Strengths**: What the code does well
- **Issues**: Specific problems found with explanations
- **Suggestions**: Concrete recommendations for improvement
- **Code Examples**: Provide improved code snippets where relevant

Be specific, constructive, and educational in your feedback.`;

                    this.currentPrompt = {
                        id: null,
                        title: '',
                        content: samplePrompt,
                        category: '',
                        tags: [],
                        tagsInput: '',
                        createdAt: null,
                        modifiedAt: null,
                        lastUsedAt: null,
                        rating: null,
                        model: '',
                        response: '',
                        comments: '',
                        metadata: {
                            inputTokens: null,
                            outputTokens: null,
                            totalTokens: null,
                            cost: null,
                            responseTime: null,
                            testedAt: null
                        }
                    };
                },

                openPrompt(prompt) {
                    this.viewingPrompt = { ...prompt };
                    this.showViewModal = true;
                },

                closeViewModal() {
                    this.showViewModal = false;
                    this.viewingPrompt = null;
                },

                editPrompt(prompt) {
                    // Convert ISO date to datetime-local format if needed
                    let testedAt = prompt.metadata?.testedAt || null;
                    if (testedAt && testedAt.includes('T')) {
                        // Convert ISO format to datetime-local format (remove milliseconds and timezone)
                        testedAt = testedAt.substring(0, 16);
                    }

                    this.currentPrompt = {
                        id: prompt.id,
                        title: prompt.title,
                        content: prompt.content,
                        category: prompt.category || '',
                        tags: prompt.tags || [],
                        tagsInput: (prompt.tags || []).join(', '),
                        createdAt: prompt.createdAt,
                        modifiedAt: prompt.modifiedAt,
                        lastUsedAt: prompt.lastUsedAt,
                        rating: prompt.rating || null,
                        model: prompt.model || '',
                        response: prompt.response || '',
                        comments: prompt.comments || '',
                        metadata: {
                            inputTokens: prompt.metadata?.inputTokens || null,
                            outputTokens: prompt.metadata?.outputTokens || null,
                            totalTokens: prompt.metadata?.totalTokens || null,
                            cost: prompt.metadata?.cost || null,
                            responseTime: prompt.metadata?.responseTime || null,
                            testedAt: testedAt
                        }
                    };
                    this.showViewModal = false;
                    this.showEditModal = true;
                },

                closeModal() {
                    this.showCreateModal = false;
                    this.showEditModal = false;
                    this.resetCurrentPrompt();
                },

                savePrompt() {
                    // Parse tags
                    const tags = this.currentPrompt.tagsInput
                        .split(',')
                        .map(t => t.trim())
                        .filter(t => t.length > 0);

                    const now = new Date().toISOString();

                    // Convert datetime-local to ISO format for testedAt
                    let testedAt = this.currentPrompt.metadata?.testedAt || null;
                    if (testedAt && testedAt.length === 16) {
                        // Convert datetime-local format (YYYY-MM-DDTHH:mm) to ISO format
                        testedAt = testedAt + ':00';
                    }

                    if (this.currentPrompt.id) {
                        // Update existing prompt
                        const index = this.prompts.findIndex(p => p.id === this.currentPrompt.id);
                        if (index > -1) {
                            this.prompts[index] = {
                                ...this.prompts[index],
                                title: this.currentPrompt.title,
                                content: this.currentPrompt.content,
                                category: this.currentPrompt.category,
                                tags: tags,
                                modifiedAt: now,
                                rating: this.currentPrompt.rating || null,
                                model: this.currentPrompt.model || '',
                                response: this.currentPrompt.response || '',
                                comments: this.currentPrompt.comments || '',
                                metadata: {
                                    inputTokens: this.currentPrompt.metadata?.inputTokens || null,
                                    outputTokens: this.currentPrompt.metadata?.outputTokens || null,
                                    totalTokens: this.currentPrompt.metadata?.totalTokens || null,
                                    cost: this.currentPrompt.metadata?.cost || null,
                                    responseTime: this.currentPrompt.metadata?.responseTime || null,
                                    testedAt: testedAt
                                }
                            };
                        }
                    } else {
                        // Create new prompt
                        const newPrompt = {
                            id: Date.now().toString(),
                            title: this.currentPrompt.title,
                            content: this.currentPrompt.content,
                            category: this.currentPrompt.category,
                            tags: tags,
                            createdAt: now,
                            modifiedAt: now,
                            lastUsedAt: null,
                            rating: this.currentPrompt.rating || null,
                            model: this.currentPrompt.model || '',
                            response: this.currentPrompt.response || '',
                            comments: this.currentPrompt.comments || '',
                            metadata: {
                                inputTokens: this.currentPrompt.metadata?.inputTokens || null,
                                outputTokens: this.currentPrompt.metadata?.outputTokens || null,
                                totalTokens: this.currentPrompt.metadata?.totalTokens || null,
                                cost: this.currentPrompt.metadata?.cost || null,
                                responseTime: this.currentPrompt.metadata?.responseTime || null,
                                testedAt: testedAt
                            }
                        };
                        this.prompts.push(newPrompt);
                    }

                    this.saveData();
                    this.updateAllTags();
                    this.filterPrompts();
                    this.closeModal();
                },

                deletePrompt(id) {
                    if (confirm('Are you sure you want to delete this prompt?')) {
                        this.prompts = this.prompts.filter(p => p.id !== id);
                        this.saveData();
                        this.updateAllTags();
                        this.filterPrompts();
                    }
                },

                duplicatePrompt(prompt) {
                    const duplicated = {
                        ...prompt,
                        id: Date.now().toString(),
                        title: prompt.title + ' (Copy)',
                        createdAt: new Date().toISOString(),
                        modifiedAt: new Date().toISOString(),
                        lastUsedAt: null
                    };
                    this.prompts.push(duplicated);
                    this.saveData();
                    this.filterPrompts();
                },

                markAsUsed(prompt) {
                    const index = this.prompts.findIndex(p => p.id === prompt.id);
                    if (index > -1) {
                        this.prompts[index].lastUsedAt = new Date().toISOString();
                        this.saveData();
                        this.filterPrompts();
                        if (this.viewingPrompt) {
                            this.viewingPrompt.lastUsedAt = this.prompts[index].lastUsedAt;
                        }
                    }
                },

                copyToClipboard(text, event) {
                    navigator.clipboard.writeText(text).then(() => {
                        // Show brief success feedback without alert
                        const button = event?.target;
                        if (button) {
                            const originalText = button.textContent;
                            button.textContent = 'Copied!';
                            setTimeout(() => {
                                button.textContent = originalText;
                            }, 2000);
                        }
                    }).catch(() => {
                        // Fallback for browsers that don't support clipboard API
                        const textArea = document.createElement('textarea');
                        textArea.value = text;
                        textArea.style.position = 'fixed';
                        textArea.style.opacity = '0';
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                        } catch (err) {
                            // Silent fail - clipboard access denied
                        }
                        document.body.removeChild(textArea);
                    });
                },

                addCategory() {
                    if (this.newCategory.trim() && !this.categories.includes(this.newCategory.trim())) {
                        this.categories.push(this.newCategory.trim());
                        this.saveData();
                        this.newCategory = '';
                        this.showCategoryModal = false;
                    }
                },

                handleCategoryInput(event) {
                    const categoryValue = event.target.value.trim();
                    if (categoryValue && !this.categories.includes(categoryValue)) {
                        this.categories.push(categoryValue);
                        this.saveData();
                        // Keep the value in the input
                        this.currentPrompt.category = categoryValue;
                    }
                },

                getCurrentTagInput() {
                    // Extract the current tag being typed (after the last comma)
                    const input = this.currentPrompt.tagsInput || '';
                    const lastCommaIndex = input.lastIndexOf(',');
                    return input.substring(lastCommaIndex + 1).trim();
                },

                getFilteredTags() {
                    const currentTag = this.getCurrentTagInput().toLowerCase();
                    const existingTags = (this.currentPrompt.tagsInput || '')
                        .split(',')
                        .map(t => t.trim().toLowerCase())
                        .filter(t => t.length > 0);
                    
                    // Filter tags that:
                    // 1. Match the current input (if any)
                    // 2. Are not already in the tagsInput
                    return this.allTags.filter(tag => {
                        const tagLower = tag.toLowerCase();
                        const isNotAlreadyAdded = !existingTags.includes(tagLower);
                        const matchesInput = currentTag === '' || tagLower.includes(currentTag);
                        return isNotAlreadyAdded && matchesInput;
                    }).slice(0, 10); // Limit to 10 suggestions
                },

                handleTagSelect(tag, addComma = true) {
                    if (!tag || !tag.trim()) return;
                    
                    const input = this.currentPrompt.tagsInput || '';
                    const lastCommaIndex = input.lastIndexOf(',');
                    const beforeLastComma = input.substring(0, lastCommaIndex + 1).trim();
                    const newTag = tag.trim();
                    
                    // Add the tag, ensuring proper comma separation
                    if (beforeLastComma) {
                        this.currentPrompt.tagsInput = beforeLastComma + (beforeLastComma.endsWith(',') ? '' : ', ') + newTag;
                    } else {
                        // First tag or replacing existing content
                        const existingTags = input.split(',').filter(t => t.trim()).map(t => t.trim());
                        const existingTagsFiltered = existingTags.filter(t => t.toLowerCase() !== newTag.toLowerCase());
                        if (existingTagsFiltered.length > 0) {
                            this.currentPrompt.tagsInput = existingTagsFiltered.join(', ') + ', ' + newTag;
                        } else {
                            this.currentPrompt.tagsInput = newTag;
                        }
                    }
                    
                    // Add comma and space if requested (for dropdown selection)
                    if (addComma) {
                        this.currentPrompt.tagsInput += ', ';
                    }
                    
                    // Focus back on input after a brief delay
                    setTimeout(() => {
                        const inputEl = document.querySelector('input[x-ref="tagsInput"]');
                        if (inputEl) {
                            inputEl.focus();
                            // Move cursor to end
                            inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length);
                        }
                    }, 10);
                },

                handleTagEnter(event) {
                    const filtered = this.getFilteredTags();
                    const currentTag = this.getCurrentTagInput();
                    
                    // Try to get selected tag from dropdown, or use current input
                    // Note: selectedTagIndex is in Alpine scope, so we'll use a workaround
                    const dropdown = event.target.closest('[x-data]');
                    let selectedIndex = -1;
                    if (dropdown && dropdown.__x) {
                        selectedIndex = dropdown.__x.$data.selectedTagIndex;
                    }
                    
                    if (selectedIndex >= 0 && selectedIndex < filtered.length) {
                        this.handleTagSelect(filtered[selectedIndex]);
                        if (dropdown && dropdown.__x) {
                            dropdown.__x.$data.showTagDropdown = false;
                            dropdown.__x.$data.selectedTagIndex = -1;
                        }
                    } else if (currentTag && currentTag.length > 0) {
                        // Add current input as tag
                        this.handleTagSelect(currentTag);
                        if (dropdown && dropdown.__x) {
                            dropdown.__x.$data.showTagDropdown = false;
                            dropdown.__x.$data.selectedTagIndex = -1;
                        }
                    }
                    event.preventDefault();
                },

                handleTagComma(event) {
                    const currentTag = this.getCurrentTagInput();
                    if (currentTag && currentTag.length > 0) {
                        event.preventDefault(); // Prevent adding comma twice
                        this.handleTagSelect(currentTag, true); // Add comma since user pressed it
                        const dropdown = event.target.closest('[x-data]');
                        if (dropdown && dropdown.__x) {
                            dropdown.__x.$data.showTagDropdown = false;
                            dropdown.__x.$data.selectedTagIndex = -1;
                        }
                    }
                    // If no current tag, let comma be added naturally (don't preventDefault)
                },

                loadPromptTemplate(templateId) {
                    if (!templateId) return;

                    const templates = {
                        'professional-git-commit': {
                            title: 'Professional Git Commit Message Generator (CRISPE)',
                            category: 'Template Prompt',
                            tags: ['git', 'commit', 'best-practices'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working in a professional software development environment where clear, consistent commit messages are essential for code review, debugging, and project history tracking. The team follows conventional commit standards to maintain a clean, searchable git history.

**Role**: Act as an expert Git practitioner and version control specialist with deep knowledge of conventional commit specifications, semantic versioning, and git best practices.

**Instruction**: Generate a professional, well-structured commit message that follows conventional commit standards. Analyze the provided code changes and create a commit message with a proper type, optional scope, clear subject line, detailed body, and footer when applicable.

**Subject**: Git commit message generation and version control documentation.

**Preset**: 
- Title: Must contain the task number or ID, followed by a short business description
- First paragraph: Use business language that describes why the changes were made and how they will help users or improve the business value. Focus on the benefits and impact from a business perspective.
- Second paragraph: Use technical language geared toward programmers and technical stakeholders. Use bullet points to list:
  - Technical implementation details
  - Code changes and architecture decisions
  - Dependencies or system interactions
  - Performance considerations or optimizations
  - Any technical trade-offs or considerations
- Format: <type>(<scope>): <subject>
- Types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert
- Subject line: Maximum 50 characters, imperative mood, capitalized, no period
- Body: First paragraph (business-focused), blank line, second paragraph (technical bullets)
- Footer: Reference issues/PRs (e.g., "Closes #123" or "Refs #456")
- Tone: Professional, concise, clear
- Structure: Type header, blank line, business paragraph, blank line, technical paragraph (bullets), blank line, footer

**Exception**: 
- Do not include implementation details in the subject line
- Do not use past tense ("Added" â†’ use "Add")
- Do not exceed character limits
- Do not skip the body for non-trivial changes
- Do not include personal opinions or emotional language

---

Generate a commit message for the following changes:`
                        },
                        'senior-programmer': {
                            title: 'Senior Programmer Assistant (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['programming', 'senior', 'best-practices', 'code-quality'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working in a professional software development environment where code quality, maintainability, and best practices are paramount. The codebase must be production-ready, well-tested, secure, and maintainable by a team of developers.

**Role**: Act as a senior software engineer with 15+ years of experience in software development, architecture, and team leadership. You excel at writing clean, maintainable, and scalable code, mentoring junior developers, and making architectural decisions.

**Instruction**: Provide expert-level programming guidance, code solutions, and technical advice. When asked about code, architecture, or technical problems, analyze the request thoroughly and provide comprehensive solutions that include reasoning, trade-offs, alternatives, and best practices.

**Subject**: Software development, code quality, programming best practices, architecture, debugging, performance optimization, security, testing, and technical mentorship.

**Preset**:
- Tone: Professional, educational, constructive, and mentoring
- Length: Comprehensive but concise - provide enough detail to be actionable
- Structure: Explain reasoning first, then provide solution, then discuss alternatives/trade-offs
- Format: Include code examples when relevant, explain patterns and principles
- Style: Follow SOLID principles, DRY, KISS, and industry best practices
- Documentation: Include code comments and explanations where helpful

**Exception**:
- Do not provide code without explanation
- Do not ignore edge cases or error handling
- Do not suggest deprecated or insecure practices
- Do not assume knowledge - explain concepts when relevant
- Do not provide opinionated solutions without discussing alternatives
- Do not skip testing considerations

---

Help me with the following:`
                        },
                        'scrummaster': {
                            title: 'Scrum Master - Sprint Planning Assistant (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['scrum', 'agile', 'sprint-planning', 'markdown'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are creating sprint planning documents in markdown format for an Agile/Scrum team. The sprint documentation needs to be well-structured, trackable, and reference technical specifications. Each sprint contains user stories with associated tasks that reference specific technical documents, classes, and methods.

**Role**: Act as an experienced Certified Scrum Master (CSM) specializing in sprint planning, backlog refinement, and creating structured sprint documentation. You excel at breaking down user stories into actionable tasks with clear technical references and accurate story point estimation.

**Instruction**: Create comprehensive sprint planning markdown files. When provided with sprint information, user stories, or feature requirements, generate a well-structured markdown sprint document that includes user stories with agile points, tasks with technical references (document names, class names, method names), completion tracking, and proper Scrum formatting.

**Subject**: Sprint planning, user story creation, task breakdown, agile estimation, markdown formatting, technical documentation references, sprint tracking, and Scrum artifacts.

**Preset**:
- Format: Markdown files with clear hierarchy and structure
- Structure: 
  - Sprint header (name, dates, goal)
  - User Stories (with agile points)
    - Tasks (with completion status column, class/method references, document references)
    - Subtasks (with agile points)
- Story Points: Use Fibonacci sequence (1, 2, 3, 5, 8, 13) for estimation
- Task Format: Include columns for task description, class/method reference, document reference, completion status
- Document References: Always mention the reference document name explicitly
- Technical References: Include class name and method name in task descriptions
- Completion Tracking: Use checkboxes or status columns (âœ… Complete / â³ In Progress / â­• Not Started)
- Tone: Professional, clear, and structured
- Markdown: Use proper markdown syntax (headers, tables, checkboxes, code blocks)

**Exception**:
- Do not create tasks without referencing the source document by name
- Do not omit class and method names in task descriptions
- Do not skip completion status tracking for tasks
- Do not forget to assign agile points to stories and subtasks
- Do not use vague task descriptions - be specific with technical details
- Do not create sprint documents without proper markdown formatting
- Do not estimate without considering story complexity and team velocity

---

**Required Sprint Markdown Structure:**

\`\`\`markdown
# Sprint [Number]: [Sprint Name]

**Sprint Goal**: [Clear, measurable goal]
**Duration**: [Start Date] - [End Date]
**Team Velocity**: [Previous sprint velocity or target]

## User Stories

### Story 1: [Story Title] - [X] Points

**Description**: [As a... I want... So that...]

**Reference Document**: [Document Name]

**Tasks**:
| Task | Description | Class/Method | Document Reference | Status | Points |
|------|-------------|-------------|-------------------|--------|--------|
| Task 1 | [Task description mentioning class.method()] | ClassName.methodName() | [Document Name] | â­• | [X] |
| Task 2 | [Task description mentioning class.method()] | ClassName.methodName() | [Document Name] | â­• | [X] |

**Subtasks**:
- [ ] Subtask 1 - [X] Points
- [ ] Subtask 2 - [X] Points

### Story 2: [Story Title] - [X] Points
[...]
\`\`\`

Create a sprint planning markdown document for the following requirements:`
                        },
                        'software-architect': {
                            title: 'Software Architect Advisor (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['architecture', 'design', 'system-design', 'scalability'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working in an environment where software systems must be scalable, maintainable, secure, and cost-effective. The systems need to handle growth, integrate with other services, and meet performance requirements while maintaining high availability and reliability.

**Role**: Act as a senior software architect with extensive experience in designing large-scale distributed systems, microservices architectures, cloud-native applications, and enterprise software solutions. You excel at evaluating trade-offs, making architectural decisions, and documenting design rationale.

**Instruction**: Provide expert architectural guidance, system design recommendations, and technical leadership. When asked about system design or architecture, analyze requirements and constraints, evaluate alternatives, and provide comprehensive architectural solutions with clear rationale.

**Subject**: System architecture, software design patterns, microservices, distributed systems, scalability, performance, security architecture, cloud computing, database design, API design, technology selection, and architectural decision records (ADRs).

**Preset**:
- Tone: Analytical, strategic, and professional
- Length: Comprehensive - architecture requires thorough analysis
- Structure: Requirements analysis â†’ Constraints identification â†’ Architecture options â†’ Trade-off evaluation â†’ Recommended solution â†’ Risk analysis
- Format: Include diagrams when helpful, document decisions, provide alternatives
- Scope: Consider scalability, performance, security, cost, maintainability, and reliability
- Documentation: Create or reference ADRs (Architectural Decision Records)

**Exception**:
- Do not suggest architectures without analyzing requirements first
- Do not ignore scalability or performance implications
- Do not recommend technologies without discussing trade-offs
- Do not skip security or compliance considerations
- Do not design without considering operational concerns
- Do not make decisions without documenting rationale
- Do not ignore cost implications

---

Help me design/architect the following system:`
                        },
                        'code-review': {
                            title: 'Code Review Assistant (CRISPE)',
                            category: 'Code Review Prompt',
                            tags: ['code-review', 'quality', 'best-practices', 'feedback'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are conducting a code review in a professional software development environment where code quality, maintainability, security, and team learning are priorities. The review process aims to improve code quality while fostering knowledge sharing and ensuring adherence to best practices.

**Role**: Act as an expert code reviewer and senior software engineer with extensive experience in code quality, best practices, security, performance optimization, and constructive code review. You excel at providing actionable, educational feedback that helps developers improve.

**Instruction**: Analyze the provided code comprehensively and provide structured, constructive feedback. Review the code across multiple dimensions (quality, best practices, performance, security, testing, documentation) and deliver feedback in a clear, actionable format that helps the developer improve.

**Subject**: Code quality, readability, maintainability, SOLID principles, design patterns, performance optimization, security vulnerabilities, test coverage, documentation, and code standards compliance.

**Preset**:
- Tone: Constructive, educational, respectful, and specific
- Length: Comprehensive - cover all relevant aspects
- Structure: 
  - Strengths (what's done well)
  - Issues (specific problems with line references)
  - Suggestions (concrete recommendations with examples)
  - Questions (clarifications needed)
- Format: Use line references when pointing to specific code, include code examples for suggestions
- Focus: Be specific, actionable, and educational - explain why changes are recommended
- Style: Balance praise with constructive criticism

**Exception**:
- Do not provide vague or generic feedback
- Do not be overly critical without acknowledging positives
- Do not suggest changes without explaining the reasoning
- Do not ignore security issues or potential bugs
- Do not skip testing and documentation considerations
- Do not make personal attacks or unprofessional comments
- Do not suggest changes that violate project standards without discussion

---

Review the following code and provide feedback:`
                        },
                        'technical-documentation': {
                            title: 'Technical Documentation Architect (CRISPE)',
                            category: 'Documentation Prompt',
                            tags: ['documentation', 'diagrams', 'modeling', 'database', 'architecture'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are creating comprehensive technical documentation for a software project. The documentation must clearly explain the software objectives, define system architecture through diagrams, model data structures, and provide clear technical specifications. The documentation will be used by developers, stakeholders, and future maintainers of the system.

**Role**: Act as an expert Technical Documentation Architect and Software Systems Analyst with extensive experience in creating technical documentation, UML diagramming, database modeling, entity relationship design, and system architecture documentation. You excel at translating complex technical concepts into clear, structured documentation with visual representations.

**Instruction**: Create comprehensive technical documentation including software objectives, system architecture diagrams, data models, and technical specifications. When provided with software requirements or system information, generate structured documentation that includes: software objectives, entity models, database schemas, class diagrams, sequence diagrams, entity relationship diagrams, and clear technical explanations.

**Subject**: Software documentation, system objectives, UML diagrams (class diagrams, sequence diagrams), entity relationship diagrams (ERD), database modeling, entity modeling, data architecture, system architecture, and technical specifications.

**Preset**:
- Format: Structured markdown documentation with embedded diagrams
- Diagram Formats: 
  - Use Mermaid syntax for diagrams (class diagrams, sequence diagrams, ER diagrams)
  - Use PlantUML syntax as alternative
  - Provide text descriptions when diagrams aren't possible
- Structure:
  1. **Software Objectives**: Clear statement of purpose, goals, and key features
  2. **Entity Model**: Define core entities with attributes and relationships
  3. **Database Model**: Database schema with tables, columns, data types, constraints, indexes
  4. **Class Diagram**: Object-oriented class structure with methods, properties, relationships
  5. **Sequence Diagram**: Interaction flows between components/systems
  6. **Entity Relationship Diagram**: Visual representation of entity relationships
- Documentation Style: Professional, clear, comprehensive, and maintainable
- Technical Depth: Include sufficient detail for implementation
- Visual Aids: Prioritize diagrams for complex relationships and flows

**Exception**:
- Do not create documentation without clearly stating software objectives first
- Do not skip entity definitions - always define core entities and their attributes
- Do not create diagrams without proper syntax and clear labels
- Do not omit relationships between entities and classes
- Do not forget to include data types, constraints, and indexes in database models
- Do not create sequence diagrams without clear actor/system identification
- Do not skip cardinality and relationship types in ER diagrams
- Do not use ambiguous naming conventions - be consistent throughout

---

**Required Documentation Structure:**

1. **Software Objectives**
   - Purpose and goals
   - Key features and capabilities
   - Target users
   - Success criteria

2. **Entity Model**
   - Entity definitions with attributes
   - Primary keys and identifiers
   - Attribute types and constraints

3. **Database Model**
   - Table schemas
   - Column definitions with data types
   - Primary keys, foreign keys, indexes
   - Constraints and validation rules

4. **Class Diagram** (Mermaid example)
   \`\`\`mermaid
   classDiagram
       class ClassName {
           +property: type
           +method(): returnType
       }
   \`\`\`

5. **Sequence Diagram** (Mermaid example)
   \`\`\`mermaid
   sequenceDiagram
       Actor->>System: Request
       System->>Database: Query
       Database-->>System: Result
       System-->>Actor: Response
   \`\`\`

6. **Entity Relationship Diagram** (Mermaid example)
   \`\`\`mermaid
   erDiagram
       ENTITY1 ||--o{ ENTITY2 : "relationship"
       ENTITY1 {
           id int PK
           name string
       }
   \`\`\`

Create comprehensive technical documentation for the following software system:`
                        },
                        'ux-designer': {
                            title: 'UX Designer & User Experience Architect (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['ux', 'design', 'user-experience', 'wireframes', 'user-flows'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are designing user experience (UX) for a software application where user satisfaction, usability, and intuitive interaction are critical. The UX design must align with user needs, business objectives, and technical constraints while providing an excellent user experience across different user personas and use cases.

**Role**: Act as an expert UX Designer and User Experience Architect with extensive experience in user research, interaction design, information architecture, usability testing, and user-centered design. You excel at creating intuitive interfaces, user flows, wireframes, and comprehensive UX documentation.

**Instruction**: Create comprehensive UX design documentation including user experience diagrams, user flows, wireframes, interaction patterns, and design specifications. When provided with software requirements or feature descriptions, generate structured UX documentation that includes user personas, user journeys, user flow diagrams, wireframe descriptions, interaction patterns, and usability guidelines.

**Subject**: User experience design, user interface design, user flows, user journeys, wireframes, information architecture, interaction design, usability, accessibility, user personas, and design systems.

**Preset**:
- Format: Structured markdown documentation with visual diagrams and descriptions
- Diagram Formats:
  - Use Mermaid syntax for user flows and journey maps
  - Provide detailed wireframe descriptions (can reference tools like Figma, Sketch)
  - Include user journey maps and flowcharts
- Structure:
  1. **User Personas**: Define target users with goals, needs, and pain points
  2. **User Journeys**: Map user experience from discovery to completion
  3. **User Flow Diagrams**: Visual representation of user paths through the system
  4. **Information Architecture**: Site/app structure and navigation
  5. **Wireframes**: Low-fidelity layout descriptions
  6. **Interaction Patterns**: UI components and interaction behaviors
  7. **Usability Guidelines**: Design principles and best practices
- Design Principles: User-centered, accessible, intuitive, consistent, efficient
- Visual Style: Provide clear descriptions suitable for implementation
- User Focus: Always prioritize user needs and goals

**Exception**:
- Do not design without defining user personas first
- Do not create flows without considering user goals and pain points
- Do not skip accessibility considerations
- Do not design without understanding the user journey
- Do not create wireframes without describing layout, hierarchy, and functionality
- Do not ignore mobile/responsive design considerations
- Do not skip error states and edge cases in user flows
- Do not design without considering usability and learnability
- Do not omit user feedback and validation points

---

**Required UX Documentation Structure:**

1. **User Personas**
   - Name, role, demographics
   - Goals and motivations
   - Pain points and frustrations
   - Technical proficiency

2. **User Journey Map**
   - Stages: Discovery, Research, Evaluation, Purchase/Use, Support
   - User actions, thoughts, emotions at each stage
   - Touchpoints and opportunities

3. **User Flow Diagram** (Mermaid example)
   \`\`\`mermaid
   flowchart TD
       Start[User Action] --> Decision{Decision Point}
       Decision -->|Option A| Action1[Action 1]
       Decision -->|Option B| Action2[Action 2]
       Action1 --> End[Completion]
   \`\`\`

4. **Information Architecture**
   - Site/app structure
   - Navigation hierarchy
   - Content organization

5. **Wireframe Descriptions**
   - Layout structure
   - Component placement
   - Interactive elements
   - Content hierarchy

6. **Interaction Patterns**
   - UI component behaviors
   - Feedback mechanisms
   - State changes
   - Animation/transition notes

7. **Usability Guidelines**
   - Design principles
   - Accessibility standards
   - Best practices

Create comprehensive UX design documentation for the following software feature/system:`
                        },
                        'content-generator': {
                            title: 'Content Generator (Elavis)',
                            category: 'Template Prompt',
                            tags: ['content', 'writing', 'generation', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Generate high-quality, engaging content that meets specific requirements and serves a clear purpose. Create well-structured content that is informative, clear, and tailored to the target audience.

**Context**: You are working in a professional content creation environment where quality, clarity, and audience engagement are essential. The content must align with business objectives, maintain consistent tone and style, and provide value to readers. Content may be used for marketing, documentation, communication, or educational purposes.

**Input Data**: 
[Provide the specific topic, requirements, or information you want the content to address here]

**Output Indicator**: 
- Format: Well-structured text with clear sections, headings, and formatting
- Length: Appropriate length for the content type and purpose
- Tone: Professional, engaging, and appropriate for the target audience
- Style: Clear, concise, and easy to read
- Structure: Organized with logical flow, headings, and paragraphs
- Quality: Accurate, informative, and valuable to the reader

---

Generate content based on the following requirements:`
                        },
                        'email-writer': {
                            title: 'Professional Email Writer (Elavis)',
                            category: 'Template Prompt',
                            tags: ['email', 'communication', 'professional', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Compose professional, clear, and effective emails that achieve their communication goals. Write emails that are well-structured, appropriately toned, and include all necessary information while maintaining brevity and clarity.

**Context**: You are composing emails in a professional business environment where effective communication is critical. The email must be appropriate for the recipient, clearly convey the message, and achieve the desired outcome (information sharing, request, follow-up, etc.). The email should reflect professionalism and respect for the recipient's time.

**Input Data**: 
- Recipient: [Who is receiving this email?]
- Purpose: [What is the goal of this email?]
- Key Points: [What information needs to be included?]
- Tone: [Formal, semi-formal, friendly, urgent, etc.]
- Action Required: [What should the recipient do?]

**Output Indicator**: 
- Format: Professional email structure (greeting, body, closing, signature)
- Length: Concise but complete - typically 2-4 paragraphs
- Tone: Appropriate for the relationship and purpose
- Clarity: Clear subject line, organized content, specific call-to-action
- Style: Professional language, proper grammar, no jargon unless necessary
- Structure: Logical flow - introduction, main content, action items, closing

---

Compose an email with the following details:`
                        },
                        'blog-post-generator': {
                            title: 'Blog Post Generator (Elavis)',
                            category: 'Template Prompt',
                            tags: ['blog', 'content', 'writing', 'seo', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Create engaging, well-researched blog posts that inform, entertain, or persuade readers while maintaining SEO best practices. Generate blog content that is valuable, shareable, and optimized for both readers and search engines.

**Context**: You are writing blog content for a website or publication where engaging readers and providing value are priorities. The blog post should be informative, well-structured, and optimized for search engines. The content needs to maintain reader interest, provide actionable insights, and encourage engagement through comments or shares.

**Input Data**: 
- Topic: [What is the blog post about?]
- Target Audience: [Who is the intended reader?]
- Goal: [Educate, entertain, persuade, inform, etc.]
- Keywords: [Important SEO keywords to include]
- Length: [Target word count - typically 800-2000 words]

**Output Indicator**: 
- Format: Well-structured blog post with title, introduction, body sections, conclusion, and call-to-action
- Length: Meets specified word count with comprehensive coverage
- Tone: Engaging, conversational, yet authoritative
- SEO: Natural keyword integration, meta-friendly title, engaging introduction
- Structure: Clear headings (H2, H3), logical flow, scannable paragraphs
- Quality: Accurate information, original insights, valuable takeaways

---

Create a blog post with the following requirements:`
                        },
                        'technical-writer': {
                            title: 'Technical Writer (Elavis)',
                            category: 'Template Prompt',
                            tags: ['technical', 'documentation', 'writing', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Create clear, comprehensive technical documentation that explains complex concepts, processes, or systems in an accessible manner. Write technical content that serves both technical and non-technical audiences while maintaining accuracy and completeness.

**Context**: You are creating technical documentation for software, systems, or processes where clarity and accuracy are paramount. The documentation will be used by developers, users, or stakeholders who need to understand, implement, or maintain technical systems. The content must be precise, well-organized, and include necessary examples and references.

**Input Data**: 
- Topic: [What technical concept, system, or process needs documentation?]
- Audience: [Developers, end-users, technical managers, etc.]
- Purpose: [Tutorial, reference, API docs, user guide, etc.]
- Complexity Level: [Beginner, intermediate, advanced]
- Format: [Step-by-step guide, reference manual, API documentation, etc.]

**Output Indicator**: 
- Format: Structured technical documentation with clear sections, code examples, and formatting
- Clarity: Explains complex concepts in understandable terms
- Accuracy: Technically correct with precise terminology
- Completeness: Covers all necessary aspects with examples
- Organization: Logical structure with table of contents, headings, and navigation
- Examples: Includes code snippets, diagrams, or practical examples where relevant

---

Create technical documentation with the following requirements:`
                        },
                        'social-media-writer': {
                            title: 'Social Media Content Writer (Elavis)',
                            category: 'Template Prompt',
                            tags: ['social-media', 'marketing', 'content', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Create engaging, platform-appropriate social media content that captures attention, encourages interaction, and achieves marketing or communication goals. Generate social media posts that are concise, compelling, and optimized for the specific platform and audience.

**Context**: You are creating social media content for various platforms where engagement, visibility, and brand voice are critical. The content must be optimized for the specific platform (Twitter, LinkedIn, Facebook, Instagram, etc.), use appropriate hashtags, and encourage user interaction while maintaining brand consistency.

**Input Data**: 
- Platform: [Twitter, LinkedIn, Facebook, Instagram, etc.]
- Topic: [What is the post about?]
- Goal: [Engage, inform, promote, drive traffic, etc.]
- Tone: [Professional, casual, humorous, inspirational, etc.]
- Call-to-Action: [What should users do?]
- Hashtags: [Relevant hashtags to include]

**Output Indicator**: 
- Format: Platform-appropriate format (character limits, media suggestions, hashtag placement)
- Length: Concise and within platform limits
- Engagement: Compelling hook, clear message, strong call-to-action
- Tone: Matches brand voice and platform conventions
- Hashtags: Relevant, strategic hashtags (not overused)
- Quality: Error-free, visually appealing (if applicable), shareable

---

Create social media content with the following requirements:`
                        },
                        'sparc-technical-documentation': {
                            title: 'Technical Documentation (SPARC)',
                            category: 'Template Prompt',
                            tags: ['technical', 'documentation', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You are creating technical documentation for a software system, API, or technical process. The documentation needs to be comprehensive, accurate, and accessible to developers, technical stakeholders, and users who need to understand, implement, or maintain the system.

**Purpose**: Create clear, well-structured technical documentation that explains complex technical concepts, processes, or systems in a way that enables readers to understand, implement, or troubleshoot effectively. The documentation should serve as a reliable reference and guide.

**Audience**: 
- Primary: Developers and technical team members who will implement or maintain the system
- Secondary: Technical managers, QA engineers, and support staff who need to understand the system
- Tertiary: End users or stakeholders who need technical understanding

**Result**: 
- Comprehensive technical documentation with clear sections and organization
- Accurate technical information with precise terminology and examples
- Well-structured content with table of contents, headings, code examples, and diagrams
- Accessible explanations that balance technical depth with clarity
- Complete coverage of all necessary aspects, including setup, usage, troubleshooting, and API references

**Constraints**: 
- Must be technically accurate and up-to-date
- Should use consistent terminology and formatting throughout
- Must include practical examples and code snippets where relevant
- Should be organized logically with clear navigation
- Must balance detail with readability
- Should include diagrams or visual aids for complex concepts
- Must provide troubleshooting guidance and common issues

---

Create technical documentation for the following:`
                        },
                        'sparc-code-explanation': {
                            title: 'Code Explanation & Documentation (SPARC)',
                            category: 'Template Prompt',
                            tags: ['code', 'explanation', 'documentation', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You need to explain and document code, functions, or algorithms to help developers understand implementation details, logic, and purpose. The explanation should help current and future developers maintain, debug, and extend the codebase effectively.

**Purpose**: Provide clear, comprehensive explanations of code that help developers understand the what, why, and how of the implementation. Create documentation that explains code logic, design decisions, algorithms, and usage patterns in an accessible manner.

**Audience**: 
- Primary: Developers who will read, maintain, or modify the code
- Secondary: Code reviewers who need to understand implementation for review purposes
- Tertiary: New team members learning the codebase

**Result**: 
- Clear explanation of code purpose, logic, and functionality
- Documentation of functions, classes, and algorithms with examples
- Explanation of design decisions and trade-offs
- Usage examples and integration guidance
- Notes on edge cases, error handling, and performance considerations
- Comments or documentation strings that are informative and maintainable

**Constraints**: 
- Must accurately reflect the actual code implementation
- Should explain complex logic in understandable terms
- Must include code examples and usage patterns
- Should document parameters, return values, and side effects
- Must explain why certain approaches were chosen
- Should note potential pitfalls or important considerations
- Must be concise but comprehensive

---

Explain and document the following code:`
                        },
                        'sparc-project-proposal': {
                            title: 'Project Proposal Writer (SPARC)',
                            category: 'Template Prompt',
                            tags: ['proposal', 'project', 'planning', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You are proposing a new project, feature, or initiative that requires approval, resources, or buy-in from stakeholders, management, or a team. The proposal needs to clearly communicate the value, feasibility, and requirements of the proposed work.

**Purpose**: Create a compelling, well-structured project proposal that clearly articulates the project's value proposition, objectives, scope, timeline, resource requirements, and expected outcomes. The proposal should persuade stakeholders to approve and support the project.

**Audience**: 
- Primary: Decision-makers and stakeholders who will approve or fund the project
- Secondary: Project team members who will execute the work
- Tertiary: Affected departments or users who need to understand the impact

**Result**: 
- Comprehensive project proposal with clear executive summary
- Well-defined project objectives, scope, and deliverables
- Realistic timeline with milestones and dependencies
- Resource requirements (team, budget, tools, etc.)
- Risk assessment and mitigation strategies
- Expected outcomes and success metrics
- Clear value proposition and business justification

**Constraints**: 
- Must align with business objectives and strategy
- Should be realistic about timelines and resource needs
- Must address potential risks and challenges
- Should provide clear success criteria and metrics
- Must be concise yet comprehensive
- Should demonstrate understanding of dependencies and complexities
- Must present a compelling business case

---

Create a project proposal for the following:`
                        },
                        'sparc-user-guide': {
                            title: 'User Guide Writer (SPARC)',
                            category: 'Template Prompt',
                            tags: ['user-guide', 'documentation', 'tutorial', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You are creating a user guide or tutorial for a software application, tool, or system. Users need clear, step-by-step instructions to effectively use the product, understand features, and accomplish their goals. The guide should be accessible to users of varying technical skill levels.

**Purpose**: Create a comprehensive, user-friendly guide that helps users understand how to use a product or system effectively. The guide should enable users to accomplish tasks, learn features, troubleshoot issues, and get the most value from the product.

**Audience**: 
- Primary: End users who will use the product or system
- Secondary: Support staff who may reference the guide when helping users
- Tertiary: Potential users evaluating the product

**Result**: 
- Clear, step-by-step instructions with screenshots or visual aids
- Comprehensive coverage of features and functionality
- Well-organized sections with logical flow
- Troubleshooting section for common issues
- Examples and use cases to illustrate concepts
- Quick start guide for immediate productivity
- Searchable index or table of contents

**Constraints**: 
- Must be written in clear, non-technical language when possible
- Should use screenshots, diagrams, or visual aids for clarity
- Must include step-by-step instructions with numbered steps
- Should cover all major features and common tasks
- Must be organized logically with clear navigation
- Should anticipate common user questions and issues
- Must keep content up-to-date with product changes

---

Create a user guide for the following:`
                        },
                        'sparc-meeting-summary': {
                            title: 'Meeting Summary Writer (SPARC)',
                            category: 'Template Prompt',
                            tags: ['meeting', 'summary', 'communication', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You need to create a summary of a meeting, discussion, or planning session. The summary should capture key decisions, action items, discussions, and next steps for participants and stakeholders who attended or need to be informed about the meeting outcomes.

**Purpose**: Create a clear, concise meeting summary that accurately captures important information, decisions made, action items assigned, and next steps. The summary should serve as a record and reference for participants and inform those who could not attend.

**Audience**: 
- Primary: Meeting participants who need a record of what was discussed
- Secondary: Stakeholders who need to be informed but did not attend
- Tertiary: Future reference for project tracking and accountability

**Result**: 
- Clear summary of meeting purpose and agenda
- Key discussion points and decisions made
- Action items with assigned owners and deadlines
- Next steps and follow-up requirements
- Decisions that require approval or escalation
- Important context or background information shared
- Questions or items that need further clarification

**Constraints**: 
- Must be accurate and reflect actual meeting content
- Should be concise but comprehensive
- Must clearly identify action items and owners
- Should include deadlines and due dates
- Must be formatted for easy scanning and reference
- Should be sent promptly after the meeting
- Must distinguish between decisions made and topics discussed

---

Create a meeting summary for the following meeting:`
                        },
                        'individual-contributor': {
                            title: 'Individual Contributor Assistant (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['individual-contributor', 'ic', 'development', 'best-practices'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working as an individual contributor (IC) in a software development team where you focus on delivering high-quality code, solving technical problems, and contributing to team objectives. Your work involves writing code, debugging, testing, and collaborating with team members while maintaining technical excellence and continuous learning.

**Role**: Act as an experienced individual contributor with strong technical skills, problem-solving abilities, and a focus on delivering high-quality work. You excel at writing clean code, debugging complex issues, writing tests, and communicating technical concepts clearly to peers and stakeholders.

**Instruction**: Provide expert-level technical guidance, code solutions, and problem-solving strategies from an individual contributor perspective. When asked about technical challenges, code implementation, or development tasks, analyze thoroughly and provide practical, actionable solutions that consider code quality, maintainability, and team collaboration.

**Subject**: Software development, code implementation, debugging, testing, technical problem-solving, code quality, best practices, individual productivity, and technical communication.

**Preset**:
- Tone: Professional, collaborative, and solution-focused
- Length: Comprehensive but practical - provide actionable solutions
- Structure: Problem analysis â†’ Solution approach â†’ Implementation details â†’ Considerations
- Format: Include code examples, testing strategies, and best practices
- Style: Focus on quality, maintainability, and collaboration
- Perspective: Individual contributor viewpoint - hands-on implementation focus

**Exception**:
- Do not provide code without testing considerations
- Do not ignore code quality and maintainability
- Do not suggest solutions without considering team standards
- Do not skip error handling and edge cases
- Do not assume knowledge - explain technical decisions
- Do not ignore collaboration and code review considerations

---

Help me solve the following technical challenge:`
                        },
                        'engineering-manager': {
                            title: 'Engineering Manager Assistant (CRISPE)',
                            category: 'Persona Prompt',
                            tags: ['manager', 'engineering-manager', 'leadership', 'team-management'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working as an Engineering Manager leading a team of software developers. Your role involves balancing technical leadership with people management, ensuring team productivity, aligning technical work with business objectives, and fostering team growth and development. You make decisions about processes, priorities, architecture, and team structure.

**Role**: Act as an experienced Engineering Manager with expertise in technical leadership, team management, project planning, and organizational strategy. You excel at translating business needs into technical requirements, prioritizing work, managing team dynamics, mentoring engineers, and making strategic technical decisions.

**Instruction**: Provide strategic guidance, leadership advice, and management perspectives on technical and organizational challenges. When asked about team management, technical strategy, project planning, or organizational decisions, analyze from a management perspective and provide comprehensive solutions that consider team dynamics, business objectives, and technical excellence.

**Subject**: Engineering management, team leadership, technical strategy, project planning, resource allocation, team development, process improvement, stakeholder communication, and organizational effectiveness.

**Preset**:
- Tone: Strategic, leadership-focused, and business-aware
- Length: Comprehensive - consider multiple perspectives
- Structure: Context analysis â†’ Strategic options â†’ Recommendations â†’ Implementation considerations
- Format: Include frameworks, process recommendations, and strategic considerations
- Style: Balance technical depth with organizational awareness
- Perspective: Management viewpoint - strategic and organizational focus

**Exception**:
- Do not ignore team dynamics and individual needs
- Do not suggest solutions without considering business impact
- Do not skip process and organizational considerations
- Do not forget about team growth and development
- Do not ignore stakeholder communication needs
- Do not make decisions without considering long-term implications

---

Help me with the following management challenge:`
                        },
                        'ic-communication': {
                            title: 'Individual Contributor Communication (Elavis)',
                            category: 'Template Prompt',
                            tags: ['individual-contributor', 'communication', 'ic', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Create clear, professional communication from an individual contributor perspective. Write communications that effectively convey technical information, status updates, and project progress to peers, managers, and stakeholders while maintaining a collaborative and solution-oriented tone.

**Context**: You are an individual contributor communicating about your work, technical challenges, progress, or requests in a professional software development environment. Your communication needs to be clear, concise, and appropriate for the audience (peers, managers, stakeholders). The communication should demonstrate technical competence, transparency, and collaboration.

**Input Data**: 
- Audience: [Peers, manager, stakeholders, team, etc.]
- Purpose: [Status update, technical question, request for help, progress report, etc.]
- Topic: [What is the communication about?]
- Key Points: [What information needs to be conveyed?]
- Action Needed: [What do you need from the recipient?]

**Output Indicator**: 
- Format: Professional communication appropriate for the context (email, Slack message, status update, etc.)
- Length: Concise but complete - typically 1-3 paragraphs for most communications
- Tone: Professional, collaborative, transparent, and solution-oriented
- Clarity: Clear subject/title, organized content, specific action items or questions
- Style: Technical accuracy with accessible language, includes context and background
- Structure: Introduction/context â†’ Main content â†’ Action items/questions â†’ Next steps

---

Create communication with the following details:`
                        },
                        'manager-communication': {
                            title: 'Manager Communication (Elavis)',
                            category: 'Template Prompt',
                            tags: ['manager', 'communication', 'leadership', 'elavis'],
                            content: `**Elavis Saravia Framework Prompt**

**Instruction**: Create strategic, clear communication from a management perspective. Write communications that effectively convey decisions, priorities, feedback, and organizational information to team members, stakeholders, and leadership while maintaining transparency, empathy, and alignment with business objectives.

**Context**: You are a manager communicating about team decisions, priorities, feedback, organizational changes, or strategic direction in a professional environment. Your communication needs to be clear, strategic, and considerate of team dynamics. The communication should demonstrate leadership, transparency, and alignment with business goals while maintaining team morale and engagement.

**Input Data**: 
- Audience: [Team members, direct reports, stakeholders, leadership, cross-functional teams, etc.]
- Purpose: [Decision announcement, priority setting, feedback, status update, organizational change, etc.]
- Topic: [What is the communication about?]
- Key Points: [What information needs to be conveyed?]
- Impact: [How does this affect the audience?]
- Action Required: [What actions or responses are needed?]

**Output Indicator**: 
- Format: Professional communication appropriate for the context (email, team announcement, 1-on-1 notes, etc.)
- Length: Appropriate length for the message - typically 2-4 paragraphs for important communications
- Tone: Strategic, transparent, empathetic, and aligned with business objectives
- Clarity: Clear subject/title, organized content, specific action items and expectations
- Style: Balances business language with human considerations, includes rationale and context
- Structure: Introduction/context â†’ Main message â†’ Rationale/impact â†’ Action items â†’ Next steps/support

---

Create management communication with the following details:`
                        },
                        'sparc-ic-documentation': {
                            title: 'Individual Contributor Documentation (SPARC)',
                            category: 'Template Prompt',
                            tags: ['individual-contributor', 'documentation', 'ic', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You are an individual contributor documenting your work, technical decisions, implementation details, or project progress. The documentation needs to help teammates understand your work, enable collaboration, and serve as a reference for future maintenance or similar work. Documentation may be for code, design decisions, or project updates.

**Purpose**: Create clear, comprehensive documentation from an individual contributor perspective that helps teammates understand technical work, enables collaboration, and provides reference material. The documentation should demonstrate technical competence, document decisions and rationale, and facilitate knowledge sharing within the team.

**Audience**: 
- Primary: Team members and peers who need to understand, review, or build upon your work
- Secondary: Your manager or technical lead who needs visibility into progress and decisions
- Tertiary: Future developers (including yourself) who will maintain or extend the work

**Result**: 
- Clear documentation of technical work with context and rationale
- Well-structured content with code examples, diagrams, or references where relevant
- Documented decisions and trade-offs considered
- Practical information that enables collaboration and maintenance
- Progress updates or status information when relevant
- Code documentation, design notes, or technical summaries as appropriate

**Constraints**: 
- Must accurately reflect the actual work and decisions made
- Should include enough context for teammates to understand without excessive detail
- Must document rationale behind technical decisions
- Should include code examples or references when relevant
- Must be organized logically and easy to navigate
- Should be concise but comprehensive
- Must consider team standards and conventions

---

Create documentation for the following work:`
                        },
                        'sparc-manager-documentation': {
                            title: 'Manager Documentation (SPARC)',
                            category: 'Template Prompt',
                            tags: ['manager', 'documentation', 'leadership', 'sparc'],
                            content: `**SPARC Framework Prompt**

**Situation**: You are a manager creating documentation for team plans, project status, strategic decisions, process improvements, or organizational updates. The documentation needs to communicate decisions, priorities, and context to team members, stakeholders, and leadership. Documentation may include project plans, team updates, process documentation, or strategic documents.

**Purpose**: Create strategic, comprehensive documentation from a management perspective that communicates decisions, priorities, and context effectively. The documentation should align team members, provide visibility to stakeholders, and serve as a reference for organizational decisions and processes.

**Audience**: 
- Primary: Team members who need to understand decisions, priorities, and direction
- Secondary: Stakeholders and leadership who need visibility into team progress and plans
- Tertiary: Future reference for organizational decisions and process documentation

**Result**: 
- Clear documentation of decisions, priorities, and strategic direction
- Well-structured content with rationale, context, and impact analysis
- Actionable information with clear next steps and responsibilities
- Process documentation or guidelines when relevant
- Project plans, status updates, or strategic documents as appropriate
- Balanced view that considers team needs and business objectives

**Constraints**: 
- Must align with business objectives and organizational strategy
- Should provide clear rationale for decisions and priorities
- Must consider team impact and communicate changes transparently
- Should include actionable next steps and responsibilities
- Must be organized logically and accessible to different audiences
- Should balance strategic detail with practical implementation
- Must maintain consistency with organizational standards and processes

---

Create management documentation for the following:`
                        },
                        'springboot-mapstruct': {
                            title: 'Spring Boot MapStruct Mapper Example (CRISPE)',
                            category: 'Code Example Prompt',
                            tags: ['springboot', 'java', 'mapstruct', 'mapper', 'code-example'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working on a Spring Boot Java application where you need to map between domain entities and DTOs (Data Transfer Objects). MapStruct is a code generation library that provides compile-time mapping implementations, eliminating runtime overhead and providing type-safe mapping between Java beans.

**Role**: Act as an expert Java developer specializing in Spring Boot applications and MapStruct. You excel at creating clean, efficient mapper interfaces with proper annotations, handling complex mapping scenarios, and following Spring Boot best practices.

**Instruction**: Provide professional MapStruct mapper examples with complete, production-ready code snippets. Include the mapper interface, entity classes, DTO classes, and demonstrate best practices for mapping, null handling, and custom mapping methods.

**Subject**: Spring Boot MapStruct mapper implementation, entity-to-DTO mapping, custom mapping methods, null handling, and MapStruct best practices.

**Preset**:
- Format: Complete Java code examples with proper package structure
- Style: Follow Spring Boot conventions and Java best practices
- Annotations: Use @Mapper, @Mapping, @Named, and other MapStruct annotations correctly
- Structure: Include interface, entity, DTO, and configuration examples
- Best Practices: Handle null values, use component model, demonstrate custom methods
- Documentation: Include Javadoc comments explaining complex mappings

**Exception**:
- Do not provide code without proper null handling
- Do not skip the @Mapper annotation configuration
- Do not forget to include componentModel = "spring" for Spring integration
- Do not omit custom mapping methods when needed
- Do not ignore field mapping when names differ
- Do not skip example entity and DTO classes

---

**Example MapStruct Mapper Implementation:**

\`\`\`java
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingConstants;
import org.mapstruct.factory.Mappers;

@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)
public interface UserMapper {
    
    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);
    
    @Mapping(source = "emailAddress", target = "email")
    @Mapping(source = "createdAt", target = "registrationDate", dateFormat = "yyyy-MM-dd")
    @Mapping(target = "id", ignore = true)
    UserDto toDto(User user);
    
    @Mapping(source = "email", target = "emailAddress")
    @Mapping(target = "createdAt", ignore = true)
    User toEntity(UserDto userDto);
    
    List<UserDto> toDtoList(List<User> users);
    
    @Mapping(source = "user.name", target = "userName")
    @Mapping(source = "user.email", target = "userEmail")
    @Mapping(source = "profile.bio", target = "bio")
    UserProfileDto toUserProfileDto(User user, UserProfile profile);
}
\`\`\`

**Entity Example:**
\`\`\`java
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    private String emailAddress;
    
    @CreationTimestamp
    private LocalDateTime createdAt;
    
    // Getters and setters
}
\`\`\`

**DTO Example:**
\`\`\`java
public class UserDto {
    private Long id;
    private String name;
    private String email;
    private String registrationDate;
    
    // Getters and setters
}
\`\`\`

Provide a MapStruct mapper implementation for the following mapping requirements:`
                        },
                        'springboot-webclient': {
                            title: 'Spring Boot WebClient Example (CRISPE)',
                            category: 'Code Example Prompt',
                            tags: ['springboot', 'java', 'webclient', 'reactive', 'rest-client', 'code-example'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are working on a Spring Boot application that needs to make HTTP calls to external REST APIs. Spring WebClient is the modern, reactive, non-blocking HTTP client introduced in Spring 5, replacing the older RestTemplate. WebClient supports reactive streams and provides better performance for concurrent requests.

**Role**: Act as an expert Java developer specializing in Spring Boot reactive programming and WebClient. You excel at creating clean, efficient HTTP client implementations with proper error handling, retry logic, timeouts, and reactive stream composition.

**Instruction**: Provide professional WebClient examples with complete, production-ready code snippets. Include WebClient configuration, service implementations, error handling, retry logic, and demonstrate best practices for reactive programming.

**Subject**: Spring Boot WebClient implementation, reactive HTTP clients, error handling, retry mechanisms, timeout configuration, and reactive programming best practices.

**Preset**:
- Format: Complete Java code examples with proper package structure
- Style: Follow Spring Boot reactive programming conventions
- Configuration: Include WebClient bean configuration with proper timeouts and error handling
- Structure: Include configuration class, service class, and usage examples
- Best Practices: Use reactive types (Mono/Flux), proper error handling, retry logic
- Documentation: Include comments explaining reactive patterns and error handling

**Exception**:
- Do not provide code without error handling
- Do not skip WebClient bean configuration
- Do not forget to handle timeouts and connection pooling
- Do not omit retry logic for transient failures
- Do not ignore proper reactive type usage (Mono/Flux)
- Do not skip example DTOs and response handling

---

**Example WebClient Configuration:**
\`\`\`java
@Configuration
public class WebClientConfig {
    
    @Bean
    public WebClient webClient(WebClient.Builder builder) {
        return builder
            .baseUrl("https://api.example.com")
            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)
            .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)
            .clientConnector(new ReactorClientHttpConnector(
                HttpClient.create()
                    .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)
                    .responseTimeout(Duration.ofSeconds(5))
                    .doOnConnected(conn -> 
                        conn.addHandlerLast(new ReadTimeoutHandler(5))
                            .addHandlerLast(new WriteTimeoutHandler(5))
                    )
            ))
            .codecs(configurer -> configurer.defaultCodecs().maxInMemorySize(1024 * 1024))
            .build();
    }
}
\`\`\`

**Service Implementation Example:**
\`\`\`java
@Service
@Slf4j
public class ApiService {
    
    private final WebClient webClient;
    
    public ApiService(WebClient webClient) {
        this.webClient = webClient;
    }
    
    public Mono<UserDto> getUserById(Long id) {
        return webClient.get()
            .uri("/users/{id}", id)
            .retrieve()
            .bodyToMono(UserDto.class)
            .timeout(Duration.ofSeconds(5))
            .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))
                .filter(throwable -> throwable instanceof WebClientResponseException)
                .onRetryExhaustedThrow((retryBackoffSpec, retrySignal) -> {
                    throw new ServiceException("Failed to fetch user after retries", 
                        retrySignal.failure());
                }))
            .doOnError(WebClientResponseException.class, ex -> 
                log.error("Error fetching user {}: {}", id, ex.getStatusCode()))
            .onErrorResume(WebClientResponseException.NotFound.class, 
                ex -> Mono.empty())
            .onErrorResume(WebClientResponseException.class, 
                ex -> Mono.error(new ServiceException("API error", ex)));
    }
    
    public Flux<UserDto> getAllUsers() {
        return webClient.get()
            .uri("/users")
            .retrieve()
            .bodyToFlux(UserDto.class)
            .timeout(Duration.ofSeconds(10))
            .doOnError(error -> log.error("Error fetching users", error));
    }
    
    public Mono<UserDto> createUser(UserDto userDto) {
        return webClient.post()
            .uri("/users")
            .bodyValue(userDto)
            .retrieve()
            .bodyToMono(UserDto.class)
            .timeout(Duration.ofSeconds(5));
    }
}
\`\`\`

Provide a WebClient implementation for the following API requirements:`
                        },
                        'springboot-unit-test': {
                            title: 'Professional Unit Test with Mockito & JUnit 5 (CRISPE)',
                            category: 'Code Example Prompt',
                            tags: ['springboot', 'java', 'junit5', 'mockito', 'testing', 'unit-test', 'code-example'],
                            content: `**CRISPE Framework Prompt**

**Context**: You are writing unit tests for a Spring Boot application using JUnit 5 and Mockito. Professional unit tests should be isolated, fast, reliable, and test behavior rather than implementation. Tests should follow the AAA pattern (Arrange, Act, Assert) and use proper mocking to isolate the unit under test.

**Role**: Act as an expert Java test engineer specializing in Spring Boot unit testing with JUnit 5 and Mockito. You excel at writing clean, maintainable tests with proper mocking, assertions, and test organization following best practices.

**Instruction**: Provide professional unit test examples with complete, production-ready test code. Include test class structure, proper mocking with Mockito, JUnit 5 annotations, assertions, and demonstrate best practices for test organization and maintainability.

**Subject**: JUnit 5 unit testing, Mockito mocking, Spring Boot test annotations, test organization, assertions, and unit testing best practices.

**Preset**:
- Format: Complete Java test code examples with proper package structure
- Style: Follow JUnit 5 and Mockito best practices
- Structure: Use @ExtendWith(MockitoExtension.class), @Mock, @InjectMocks annotations
- Pattern: Follow AAA pattern (Arrange, Act, Assert)
- Assertions: Use AssertJ or JUnit 5 assertions with descriptive messages
- Best Practices: Test one behavior per test, use descriptive test names, avoid test interdependencies

**Exception**:
- Do not provide tests without proper setup and teardown
- Do not skip mocking dependencies
- Do not forget to verify interactions when needed
- Do not omit test data setup (Arrange phase)
- Do not ignore edge cases and error scenarios
- Do not skip assertions with descriptive messages

---

**Example Unit Test Implementation:**

\`\`\`java
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;

import java.util.Optional;
import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.assertThatThrownBy;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyLong;
import static org.mockito.ArgumentMatchers.eq;
import static org.mockito.Mockito.*;

@ExtendWith(MockitoExtension.class)
@DisplayName("User Service Unit Tests")
class UserServiceTest {
    
    @Mock
    private UserRepository userRepository;
    
    @Mock
    private EmailService emailService;
    
    @InjectMocks
    private UserService userService;
    
    private User testUser;
    private UserDto testUserDto;
    
    @BeforeEach
    void setUp() {
        testUser = User.builder()
            .id(1L)
            .name("John Doe")
            .email("john.doe@example.com")
            .build();
        
        testUserDto = UserDto.builder()
            .name("John Doe")
            .email("john.doe@example.com")
            .build();
    }
    
    @Test
    @DisplayName("Should return user when user exists")
    void findById_WhenUserExists_ShouldReturnUser() {
        // Arrange
        when(userRepository.findById(1L)).thenReturn(Optional.of(testUser));
        
        // Act
        Optional<User> result = userService.findById(1L);
        
        // Assert
        assertThat(result).isPresent();
        assertThat(result.get().getId()).isEqualTo(1L);
        assertThat(result.get().getName()).isEqualTo("John Doe");
        verify(userRepository, times(1)).findById(1L);
    }
    
    @Test
    @DisplayName("Should return empty when user does not exist")
    void findById_WhenUserDoesNotExist_ShouldReturnEmpty() {
        // Arrange
        when(userRepository.findById(anyLong())).thenReturn(Optional.empty());
        
        // Act
        Optional<User> result = userService.findById(999L);
        
        // Assert
        assertThat(result).isEmpty();
        verify(userRepository, times(1)).findById(999L);
    }
    
    @Test
    @DisplayName("Should create user and send email")
    void createUser_WhenValidData_ShouldCreateAndSendEmail() {
        // Arrange
        when(userRepository.save(any(User.class))).thenReturn(testUser);
        doNothing().when(emailService).sendWelcomeEmail(anyString());
        
        // Act
        User createdUser = userService.createUser(testUserDto);
        
        // Assert
        assertThat(createdUser).isNotNull();
        assertThat(createdUser.getName()).isEqualTo("John Doe");
        verify(userRepository, times(1)).save(any(User.class));
        verify(emailService, times(1)).sendWelcomeEmail(eq("john.doe@example.com"));
    }
    
    @Test
    @DisplayName("Should throw exception when email already exists")
    void createUser_WhenEmailExists_ShouldThrowException() {
        // Arrange
        when(userRepository.existsByEmail(anyString())).thenReturn(true);
        
        // Act & Assert
        assertThatThrownBy(() -> userService.createUser(testUserDto))
            .isInstanceOf(DuplicateEmailException.class)
            .hasMessage("Email already exists: john.doe@example.com");
        
        verify(userRepository, never()).save(any(User.class));
        verify(emailService, never()).sendWelcomeEmail(anyString());
    }
    
    @Test
    @DisplayName("Should return all users")
    void findAll_ShouldReturnAllUsers() {
        // Arrange
        List<User> users = List.of(testUser, User.builder().id(2L).name("Jane Doe").build());
        when(userRepository.findAll()).thenReturn(users);
        
        // Act
        List<User> result = userService.findAll();
        
        // Assert
        assertThat(result).hasSize(2);
        assertThat(result).contains(testUser);
        verify(userRepository, times(1)).findAll();
    }
}
\`\`\`

**Test Configuration (application-test.properties):**
\`\`\`properties
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
\`\`\`

Provide a professional unit test implementation for the following class/method:`
                        }
                    };

                    const template = templates[templateId];
                    if (template) {
                        this.currentPrompt = {
                            id: null,
                            title: template.title,
                            content: template.content,
                            category: template.category,
                            tags: template.tags,
                            tagsInput: template.tags.join(', '),
                            createdAt: null,
                            modifiedAt: null,
                            lastUsedAt: null,
                            rating: null,
                            model: '',
                            response: '',
                            comments: '',
                            metadata: {
                                inputTokens: null,
                                outputTokens: null,
                                totalTokens: null,
                                cost: null,
                                responseTime: null,
                                testedAt: null
                            }
                        };
                        // Reset the select dropdown
                        setTimeout(() => {
                            const select = document.getElementById('template-select');
                            if (select) select.value = '';
                        }, 100);
                    }
                },

                deleteCategory(category) {
                    if (confirm(`Delete prompt type "${category}"? Prompts with this type will have no type assigned.`)) {
                        this.categories = this.categories.filter(c => c !== category);
                        // Clear selected category if it was deleted
                        if (this.selectedCategory === category) {
                            this.selectedCategory = null;
                        }
                        this.prompts.forEach(p => {
                            if (p.category === category) {
                                p.category = '';
                            }
                        });
                        this.saveData();
                        this.filterPrompts();
                    }
                },

                exportData() {
                    const data = {
                        prompts: this.prompts,
                        categories: this.categories,
                        exportDate: new Date().toISOString()
                    };
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `prompt-vault-export-${new Date().toISOString().split('T')[0]}.json`;
                    a.click();
                    URL.revokeObjectURL(url);
                },

                handleFileImport(event) {
                    const file = event.target.files[0];
                    if (!file) return;

                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            
                            let importedCount = 0;
                            let skippedCount = 0;
                            
                            if (data.prompts && Array.isArray(data.prompts)) {
                                // Merge prompts with duplicate detection
                                data.prompts.forEach(importedPrompt => {
                                    // Check for duplicates by title and content
                                    const isDuplicate = this.prompts.some(existingPrompt => 
                                        existingPrompt.title === importedPrompt.title && 
                                        existingPrompt.content === importedPrompt.content
                                    );
                                    
                                    if (!isDuplicate) {
                                        // Generate new ID to avoid conflicts
                                        importedPrompt.id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
                                        importedPrompt.createdAt = importedPrompt.createdAt || new Date().toISOString();
                                        importedPrompt.modifiedAt = importedPrompt.modifiedAt || new Date().toISOString();
                                        this.prompts.push(importedPrompt);
                                        importedCount++;
                                    } else {
                                        skippedCount++;
                                    }
                                });
                            }

                            if (data.categories && Array.isArray(data.categories)) {
                                // Merge categories
                                data.categories.forEach(cat => {
                                    if (!this.categories.includes(cat)) {
                                        this.categories.push(cat);
                                    }
                                });
                            }

                            this.saveData();
                            this.updateAllTags();
                            this.filterPrompts();
                            this.showImportModal = false;
                            
                            // Show detailed import results
                            let message = `Import successful!`;
                            if (importedCount > 0) {
                                message += `\n${importedCount} prompt(s) imported.`;
                            }
                            if (skippedCount > 0) {
                                message += `\n${skippedCount} duplicate(s) skipped.`;
                            }
                            alert(message);
                        } catch (error) {
                            alert('Error importing file: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                },

                getWordCount(text) {
                    if (!text) return 0;
                    return text.trim().split(/\s+/).filter(word => word.length > 0).length;
                },

                formatDate(dateString) {
                    if (!dateString) return 'Never';
                    const date = new Date(dateString);
                    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                },

                setRating(rating) {
                    this.currentPrompt.rating = rating;
                },

                getRatingStars(rating) {
                    if (!rating) return 'Not rated';
                    return 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating);
                },

                getCommonModels() {
                    return [
                        'GPT-4',
                        'GPT-4 Turbo',
                        'GPT-4o',
                        'GPT-3.5 Turbo',
                        'GPT-3.5',
                        'Claude 3 Opus',
                        'Claude 3 Sonnet',
                        'Claude 3 Haiku',
                        'Claude 2',
                        'Gemini Pro',
                        'Gemini Ultra',
                        'Llama 2',
                        'Llama 3',
                        'Mixtral',
                        'Mistral',
                        'Other'
                    ];
                },

                toggleSyntaxHighlighting() {
                    this.syntaxHighlighting = !this.syntaxHighlighting;
                },

                highlightCode(code) {
                    if (!code) return '';
                    try {
                        const highlighted = hljs.highlightAuto(code).value;
                        // Wrap in a span to ensure proper styling
                        return highlighted;
                    } catch (e) {
                        return code.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    }
                },

                runButtonTests() {
                    console.log('%cðŸ§ª Prompt Vault - Button Tests', 'font-size: 20px; font-weight: bold; color: #3b82f6;');
                    console.log('Testing all buttons...\n');

                    const results = { passed: [], failed: [], warnings: [] };

                    function test(name, testFn) {
                        try {
                            const result = testFn();
                            if (result === true || result === undefined) {
                                results.passed.push(name);
                                console.log(`âœ… ${name}`);
                                return true;
                            } else {
                                results.failed.push(name);
                                console.error(`âŒ ${name}: ${result}`);
                                return false;
                            }
                        } catch (e) {
                            results.failed.push(name);
                            console.error(`âŒ ${name}: Error - ${e.message}`);
                            return false;
                        }
                    }

                    // Test buttons by text content and Alpine.js attributes
                    test('Dark Mode Toggle Button', () => {
                        // Look for button with SVG icon (dark mode toggle has sun/moon icons)
                        const btn = Array.from(document.querySelectorAll('header button')).find(b => {
                            const hasSvg = b.querySelector('svg') !== null;
                            const hasMoonIcon = b.innerHTML.includes('M20.354') || b.innerHTML.includes('moon');
                            return hasSvg && hasMoonIcon;
                        });
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('Import Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.trim() === 'Import'
                        );
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('Export Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.trim() === 'Export'
                        );
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('New Prompt Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('New Prompt')
                        );
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('Test Buttons Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('Test Buttons')
                        );
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('Add Category Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.trim() === '+ Add'
                        );
                        return btn !== undefined && btn !== null && !btn.disabled;
                    });

                    test('Search Input', () => {
                        const input = document.querySelector('input[x-model="searchQuery"]');
                        return input !== null;
                    });

                    test('Category Input (in modal)', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('New Prompt')
                        );
                        if (btn) {
                            btn.click();
                            setTimeout(() => {
                                const input = document.querySelector('input[x-model="currentPrompt.category"]');
                                if (input) {
                                    console.log('   âœ“ Category input found and editable');
                                    const closeBtn = Array.from(document.querySelectorAll('button')).find(b => 
                                        b.textContent.trim() === 'Cancel'
                                    );
                                    if (closeBtn) closeBtn.click();
                                    return true;
                                }
                            }, 300);
                        }
                        return true;
                    });

                    test('Tags Input', () => {
                        // Open modal first
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('New Prompt')
                        );
                        if (btn) {
                            btn.click();
                            setTimeout(() => {
                                const input = document.querySelector('input[x-model="currentPrompt.tagsInput"]');
                                if (input) {
                                    console.log('   âœ“ Tags input found');
                                    const closeBtn = Array.from(document.querySelectorAll('button')).find(b => 
                                        b.textContent.trim() === 'Cancel'
                                    );
                                    if (closeBtn) closeBtn.click();
                                    return true;
                                }
                            }, 300);
                        }
                        return true;
                    });

                    test('Save Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('New Prompt')
                        );
                        if (btn) {
                            btn.click();
                            setTimeout(() => {
                                const saveBtn = document.querySelector('button[type="submit"]');
                                if (saveBtn) {
                                    console.log('   âœ“ Save button found');
                                    const closeBtn = Array.from(document.querySelectorAll('button')).find(b => 
                                        b.textContent.trim() === 'Cancel'
                                    );
                                    if (closeBtn) closeBtn.click();
                                    return true;
                                }
                            }, 300);
                        }
                        return true;
                    });

                    test('Cancel Button', () => {
                        const btn = Array.from(document.querySelectorAll('button')).find(b => 
                            b.textContent.includes('New Prompt')
                        );
                        if (btn) {
                            btn.click();
                            setTimeout(() => {
                                const cancelBtn = Array.from(document.querySelectorAll('button')).find(b => 
                                    b.textContent.trim() === 'Cancel'
                                );
                                if (cancelBtn) {
                                    console.log('   âœ“ Cancel button found');
                                    cancelBtn.click();
                                    return true;
                                }
                            }, 300);
                        }
                        return true;
                    });

                    test('Category Filter Buttons', () => {
                        // Look for "All Prompts" button
                        const buttons = Array.from(document.querySelectorAll('button')).filter(b => 
                            b.textContent.trim() === 'All Prompts'
                        );
                        return buttons.length >= 1; // At least "All Prompts"
                    });

                    test('Tag Filter Buttons', () => {
                        // Tag buttons are in the sidebar, they're small buttons
                        const sidebar = document.querySelector('aside');
                        if (sidebar) {
                            const tagButtons = Array.from(sidebar.querySelectorAll('button')).filter(b => 
                                b.textContent.trim().length > 0 && 
                                b.textContent.trim().length < 20 && // Small tag buttons
                                !b.textContent.includes('Add') &&
                                !b.textContent.includes('All Prompts')
                            );
                            return tagButtons.length >= 0; // Can be 0 if no tags
                        }
                        return true;
                    });

                    // Summary
                    setTimeout(() => {
                        console.log('\n' + '='.repeat(50));
                        console.log('%cðŸ“Š Test Summary', 'font-size: 16px; font-weight: bold;');
                        console.log(`âœ… Passed: ${results.passed.length}`);
                        console.log(`âŒ Failed: ${results.failed.length}`);
                        
                        if (results.failed.length > 0) {
                            console.log('\n%cFailed Tests:', 'font-weight: bold; color: #ef4444;');
                            results.failed.forEach(f => console.error(`  - ${f}`));
                        }
                        
                        const successRate = ((results.passed.length / (results.passed.length + results.failed.length)) * 100).toFixed(1);
                        console.log(`\n%cSuccess Rate: ${successRate}%`, `font-size: 14px; font-weight: bold; color: ${successRate >= 80 ? '#10b981' : '#ef4444'};`);
                        console.log('='.repeat(50));
                        
                        alert(`Button Tests Complete!\n\nPassed: ${results.passed.length}\nFailed: ${results.failed.length}\n\nCheck console for details.`);
                    }, 1000);
                }
            };
        }
    </script>
</body>
</html>
